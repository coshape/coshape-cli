!function e(t,r,n){function a(s,i){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return a(r||e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t,r){t.exports=function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}},{}],2:[function(e,t,r){var n=e("./is-equal-1d"),a=e("./is-left-2d");t.exports=function(e){for(var t,r,o=-1,s=-1e6,i=1e7,u=e.length,l=0;l<u;l++)t=e[l][0],((r=e[l][1])<i||r==i&&t>s)&&(o=l,s=t,i=r);for(var f=[],l=0;l<u;l++)t=e[l][0]-s,r=e[l][1]-i,f[l]={key:l,value:Math.atan2(r,t),length:t*t+r*r};f.sort(function(e,t){return n(e.value,t.value)?0:e.value<t.value?-1:1});for(var c,h,l=1;l<f.length;l++)c=f[l-1],h=f[l],n(c.value,h.value)&&(c.length>h.length?f.splice(l,1):f.splice(l-1,1),l--);for(var d,l=1,p=f.length,g=[f[p-1].key,o];l<p;){d=f[l].key;var v=g.length-1;a(e[g[v-1]],e[g[v]],e[d])?(g.push(d),l++):g.pop()}return g}},{"./is-equal-1d":15,"./is-left-2d":17}],3:[function(e,t,r){t.exports=function(e,t){return e[0]*t[1]-t[0]*e[1]}},{}],4:[function(e,t,r){var n=e("gl-matrix").vec2,a=e("gl-matrix").vec3,o=e("./intersection-2d");t.exports=function(e,t){t=void 0==t?.5:t;var r,s,i,u=[],l=e.length,f=a.create(),c=a.fromValues(0,0,1),h=a.create(),d=n.create(),p=n.create(),g=n.create(),v=n.create(),m=n.create();r=e[l-1],s=e[0],n.copy(d,r),n.copy(p,s),n.subtract(m,p,d),a.set(h,m[0],m[1],0),a.cross(f,h,c),a.normalize(f,f),a.scale(f,f,t),n.copy(m,f),n.add(d,d,m),n.add(p,p,m);for(var x=0;x<l;x++)s=e[x],i=e[(x+1)%l],n.copy(g,s),n.copy(v,i),n.subtract(m,v,g),a.set(h,m[0],m[1],0),a.cross(f,h,c),a.normalize(f,f),a.scale(f,f,t),n.copy(m,f),n.add(g,g,m),n.add(v,v,m),u.push(o(d,p,g,v)),n.copy(d,g),n.copy(p,v);return u}},{"./intersection-2d":7,"gl-matrix":22}],5:[function(e,t,r){t.exports=function(e){return e>1e-5}},{}],6:[function(e,t,r){var n=e("./is-left-on-2d"),a=e("./is-left-2d");t.exports=function(e,t,r,o){return n(t,r,e)?a(t,o,e)&&a(o,t,r):!(n(o,t,e)&&n(t,o,r))}},{"./is-left-2d":17,"./is-left-on-2d":18}],7:[function(e,t,r){var n=e("gl-matrix").vec2,a=e("./cross-2d"),o=e("./is-zero-1d");t.exports=function(e,t,r,s){var i=n.clone(e),u=n.clone(t);n.subtract(u,u,i);var l=n.clone(r),f=n.clone(s);n.subtract(f,f,l);var c=n.create();n.subtract(c,l,i);var h=-1,d=a(u,f),p=a(c,u),g=a(c,f);if(0!=d)h=g/d;else if(o(p)&&o(d))var h=n.dot(c,u)/n.dot(u,u);else if(!o(p)&&o(d))throw"lines are parallel and do no intersect";return n.fromValues(i[0]+h*u[0],i[1]+h*u[1])}},{"./cross-2d":3,"./is-zero-1d":19,"gl-matrix":22}],8:[function(e,t,r){var n=e("./intersects-proper-2d"),a=e("./is-between-2d");t.exports=function(e,t,r,o){return!!n(e,t,r,o)||!!(a(e,t,r)||a(e,t,o)||a(r,o,e)||a(r,o,t))}},{"./intersects-proper-2d":9,"./is-between-2d":10}],9:[function(e,t,r){var n=e("./is-colinear-2d"),a=e("./is-left-2d");t.exports=function(e,t,r,o){return!(n(e,t,r)||n(e,t,o)||n(r,o,e)||n(r,o,t))&&(a(e,t,r)!=a(e,t,o)&&a(r,o,e)!=a(r,o,t))}},{"./is-colinear-2d":11,"./is-left-2d":17}],10:[function(e,t,r){var n=e("./is-colinear-2d");t.exports=function(e,t,r){return!!n(e,t,r)&&(e[0]!==t[0]?e[0]<=r[0]&&r[0]<=t[0]||e[0]>=r[0]&&r[0]>=t[0]:e[1]<=r[1]&&r[1]<=t[1]||e[1]>=r[1]&&r[1]>=t[1])}},{"./is-colinear-2d":11}],11:[function(e,t,r){var n=e("./is-zero-1d"),a=e("./area2-2d");t.exports=function(e,t,r){return n(a(e,t,r))}},{"./area2-2d":1,"./is-zero-1d":19}],12:[function(e,t,r){var n=e("./is-zero-1d");t.exports=function(e,t,r){var a=r[0]-e[0],o=r[1]-e[1],s=r[2]-e[2],i=t[0]-e[0],u=t[1]-e[1],l=t[2]-e[2];return n(s*u-l*o)&&n(l*a-i*s)&&n(i*o-u*a)}},{"./is-zero-1d":19}],13:[function(e,t,r){var n=e("./in-cone-2d"),a=e("./is-diagonalie-2d");t.exports=function(e,t,r){var o=r.length,s=r[e-1<0?o-1:e-1],i=r[e],u=r[(e+1)%o],l=r[t-1<0?o-1:t-1],f=r[t],c=r[(t+1)%o];return!!(n(s,i,u,f)&&n(l,f,c,i)&&a(i,f,r))}},{"./in-cone-2d":6,"./is-diagonalie-2d":14}],14:[function(e,t,r){var n=e("./is-equal-2d"),a=e("./intersects-proper-2d");t.exports=function(e,t,r){for(var o,s,i=r.length,u=0;u<i;u++)if(o=r[u],s=r[(u+1)%i],!n(o,e)&&!n(s,e)&&!n(o,t)&&!n(s,t)&&a(e,t,o,s))return!1;return!0}},{"./intersects-proper-2d":9,"./is-equal-2d":16}],15:[function(e,t,r){var n=e("./is-zero-1d");t.exports=function(e,t){return e===t||n(e-t)}},{"./is-zero-1d":19}],16:[function(e,t,r){var n=(e("./is-zero-1d"),e("./is-equal-1d"));t.exports=function(e,t){return!(!n(e[0],t[0])||!n(e[1],t[1]))}},{"./is-equal-1d":15,"./is-zero-1d":19}],17:[function(e,t,r){var n=e("./greater-than-zero-1d"),a=e("./area2-2d");t.exports=function(e,t,r){return n(a(e,t,r))}},{"./area2-2d":1,"./greater-than-zero-1d":5}],18:[function(e,t,r){var n=e("./area2-2d"),a=e("./greater-than-zero-1d"),o=e("./is-zero-1d");t.exports=function(e,t,r){var s=n(e,t,r);return a(s)||o(s)}},{"./area2-2d":1,"./greater-than-zero-1d":5,"./is-zero-1d":19}],19:[function(e,t,r){t.exports=function(e){return 0===e||Math.abs(e)<1e-6}},{}],20:[function(e,t,r){var n=e("./is-diagonal-2d");t.exports=function(e){for(var t=e.length,r=[],a=0;a<t;a++){var o=a-1<0?t-1:a-1,s=(a+1)%t;r.push(n(o,s,e))}for(var i,u,l,f,c=e.slice(0),h=0,d=c.length,p=0,g=[],v=0,a=0;a<t;a++)g[a]=a;for(var m=[];d>3;)do{if(v=g.length,h%=v,r[g[h]]){f=(h+2)%v,l=(h+1)%v,u=h-1,u=u<0?v+u:u,i=u-1,i=i<0?v+i:i,i%=v,u%=v,h%=v,l%=v,f%=v,r[g[u]]=n(g[i],g[l],c),r[g[l]]=n(g[u],g[f],c),m.push([g[h],g[l],g[u]]),g.splice(h,1),p=l,d--;break}h++}while(h!=p);return m.push([g[1],g[2],g[0]]),m}},{"./is-diagonal-2d":13}],21:[function(e,t,r){r.greaterThanZero=e("./cga/greater-than-zero-1d.js"),r.isEqual=e("./cga/is-equal-1d.js"),r.isZero=e("./cga/is-zero-1d.js"),r.area2=e("./cga/area2-2d.js"),r.convexHull2=e("./cga/convex-hull-2d.js"),r.cross2=e("./cga/cross-2d.js"),r.expandPolygon2=e("./cga/expand-polygon-2d.js"),r.inCone2=e("./cga/in-cone-2d.js"),r.intersection2=e("./cga/intersection-2d.js"),r.intersects2=e("./cga/intersects-2d.js"),r.intersectsProper2=e("./cga/intersects-proper-2d.js"),r.isBetween2=e("./cga/is-between-2d.js"),r.isColinear2=e("./cga/is-colinear-2d.js"),r.isDiagonal2=e("./cga/is-diagonal-2d.js"),r.isDiagonalie2=e("./cga/is-diagonalie-2d.js"),r.isEqual2=e("./cga/is-equal-2d.js"),r.isLeft2=e("./cga/is-left-2d.js"),r.isLeftOn2=e("./cga/is-left-on-2d.js"),r.triangulatePolygon2=e("./cga/triangulate-polygon-2d.js"),r.isColinear3=e("./cga/is-colinear-3d.js")},{"./cga/area2-2d.js":1,"./cga/convex-hull-2d.js":2,"./cga/cross-2d.js":3,"./cga/expand-polygon-2d.js":4,"./cga/greater-than-zero-1d.js":5,"./cga/in-cone-2d.js":6,"./cga/intersection-2d.js":7,"./cga/intersects-2d.js":8,"./cga/intersects-proper-2d.js":9,"./cga/is-between-2d.js":10,"./cga/is-colinear-2d.js":11,"./cga/is-colinear-3d.js":12,"./cga/is-diagonal-2d.js":13,"./cga/is-diagonalie-2d.js":14,"./cga/is-equal-1d.js":15,"./cga/is-equal-2d.js":16,"./cga/is-left-2d.js":17,"./cga/is-left-on-2d.js":18,"./cga/is-zero-1d.js":19,"./cga/triangulate-polygon-2d.js":20}],22:[function(e,t,r){r.glMatrix=e("./gl-matrix/common.js"),r.mat2=e("./gl-matrix/mat2.js"),r.mat2d=e("./gl-matrix/mat2d.js"),r.mat3=e("./gl-matrix/mat3.js"),r.mat4=e("./gl-matrix/mat4.js"),r.quat=e("./gl-matrix/quat.js"),r.vec2=e("./gl-matrix/vec2.js"),r.vec3=e("./gl-matrix/vec3.js"),r.vec4=e("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":23,"./gl-matrix/mat2.js":24,"./gl-matrix/mat2d.js":25,"./gl-matrix/mat3.js":26,"./gl-matrix/mat4.js":27,"./gl-matrix/quat.js":28,"./gl-matrix/vec2.js":29,"./gl-matrix/vec3.js":30,"./gl-matrix/vec4.js":31}],23:[function(e,t,r){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var a=Math.PI/180;n.toRadian=function(e){return e*a},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.exports=n},{}],24:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.fromValues=function(e,t,r,a){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=a,o},a.set=function(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e},a.transpose=function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},a.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=r*o-a*n;return s?(s=1/s,e[0]=o*s,e[1]=-n*s,e[2]=-a*s,e[3]=r*s,e):null},a.adjoint=function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},a.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},a.multiply=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=r[0],u=r[1],l=r[2],f=r[3];return e[0]=n*i+o*u,e[1]=a*i+s*u,e[2]=n*l+o*f,e[3]=a*l+s*f,e},a.mul=a.multiply,a.rotate=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*i,e[1]=a*u+s*i,e[2]=n*-i+o*u,e[3]=a*-i+s*u,e},a.scale=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=r[0],u=r[1];return e[0]=n*i,e[1]=a*i,e[2]=o*u,e[3]=s*u,e},a.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},a.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},a.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},a.sub=a.subtract,a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],i=t[0],u=t[1],l=t[2],f=t[3];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-f)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))},a.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},a.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},t.exports=a},{"./common.js":23}],25:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.fromValues=function(e,t,r,a,o,s){var i=new n.ARRAY_TYPE(6);return i[0]=e,i[1]=t,i[2]=r,i[3]=a,i[4]=o,i[5]=s,i},a.set=function(e,t,r,n,a,o,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=s,e},a.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=r*o-n*a;return u?(u=1/u,e[0]=o*u,e[1]=-n*u,e[2]=-a*u,e[3]=r*u,e[4]=(a*i-o*s)*u,e[5]=(n*s-r*i)*u,e):null},a.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},a.multiply=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=r[0],f=r[1],c=r[2],h=r[3],d=r[4],p=r[5];return e[0]=n*l+o*f,e[1]=a*l+s*f,e[2]=n*c+o*h,e[3]=a*c+s*h,e[4]=n*d+o*p+i,e[5]=a*d+s*p+u,e},a.mul=a.multiply,a.rotate=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+o*l,e[1]=a*f+s*l,e[2]=n*-l+o*f,e[3]=a*-l+s*f,e[4]=i,e[5]=u,e},a.scale=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=r[0],f=r[1];return e[0]=n*l,e[1]=a*l,e[2]=o*f,e[3]=s*f,e[4]=i,e[5]=u,e},a.translate=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=r[0],f=r[1];return e[0]=n,e[1]=a,e[2]=o,e[3]=s,e[4]=n*l+o*f+i,e[5]=a*l+s*f+u,e},a.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},a.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e},a.sub=a.subtract,a.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},a.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],i=e[4],u=e[5],l=t[0],f=t[1],c=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-h)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(i-d)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-p)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},t.exports=a},{"./common.js":23}],26:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},a.clone=function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.fromValues=function(e,t,r,a,o,s,i,u,l){var f=new n.ARRAY_TYPE(9);return f[0]=e,f[1]=t,f[2]=r,f[3]=a,f[4]=o,f[5]=s,f[6]=i,f[7]=u,f[8]=l,f},a.set=function(e,t,r,n,a,o,s,i,u,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=s,e[6]=i,e[7]=u,e[8]=l,e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},a.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=t[6],l=t[7],f=t[8],c=f*s-i*l,h=-f*o+i*u,d=l*o-s*u,p=r*c+n*h+a*d;return p?(p=1/p,e[0]=c*p,e[1]=(-f*n+a*l)*p,e[2]=(i*n-a*s)*p,e[3]=h*p,e[4]=(f*r-a*u)*p,e[5]=(-i*r+a*o)*p,e[6]=d*p,e[7]=(-l*r+n*u)*p,e[8]=(s*r-n*o)*p,e):null},a.adjoint=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=t[6],l=t[7],f=t[8];return e[0]=s*f-i*l,e[1]=a*l-n*f,e[2]=n*i-a*s,e[3]=i*u-o*f,e[4]=r*f-a*u,e[5]=a*o-r*i,e[6]=o*l-s*u,e[7]=n*u-r*l,e[8]=r*s-n*o,e},a.determinant=function(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],i=e[6],u=e[7],l=e[8];return t*(l*o-s*u)+r*(-l*a+s*i)+n*(u*a-o*i)},a.multiply=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=r[0],d=r[1],p=r[2],g=r[3],v=r[4],m=r[5],x=r[6],M=r[7],y=r[8];return e[0]=h*n+d*s+p*l,e[1]=h*a+d*i+p*f,e[2]=h*o+d*u+p*c,e[3]=g*n+v*s+m*l,e[4]=g*a+v*i+m*f,e[5]=g*o+v*u+m*c,e[6]=x*n+M*s+y*l,e[7]=x*a+M*i+y*f,e[8]=x*o+M*u+y*c,e},a.mul=a.multiply,a.translate=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=a,e[2]=o,e[3]=s,e[4]=i,e[5]=u,e[6]=h*n+d*s+l,e[7]=h*a+d*i+f,e[8]=h*o+d*u+c,e},a.rotate=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*s,e[1]=d*a+h*i,e[2]=d*o+h*u,e[3]=d*s-h*n,e[4]=d*i-h*a,e[5]=d*u-h*o,e[6]=l,e[7]=f,e[8]=c,e},a.scale=function(e,t,r){var n=r[0],a=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},a.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},a.fromQuat=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=r+r,i=n+n,u=a+a,l=r*s,f=n*s,c=n*i,h=a*s,d=a*i,p=a*u,g=o*s,v=o*i,m=o*u;return e[0]=1-c-p,e[3]=f-m,e[6]=h+v,e[1]=f+m,e[4]=1-l-p,e[7]=d-g,e[2]=h-v,e[5]=d+g,e[8]=1-l-c,e},a.normalFromMat4=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=t[6],l=t[7],f=t[8],c=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],m=t[15],x=r*i-n*s,M=r*u-a*s,y=r*l-o*s,b=n*u-a*i,E=n*l-o*i,w=a*l-o*u,I=f*g-c*p,S=f*v-h*p,F=f*m-d*p,D=c*v-h*g,_=c*m-d*g,A=h*m-d*v,j=x*A-M*_+y*D+b*F-E*S+w*I;return j?(j=1/j,e[0]=(i*A-u*_+l*D)*j,e[1]=(u*F-s*A-l*S)*j,e[2]=(s*_-i*F+l*I)*j,e[3]=(a*_-n*A-o*D)*j,e[4]=(r*A-a*F+o*S)*j,e[5]=(n*F-r*_-o*I)*j,e[6]=(g*w-v*E+m*b)*j,e[7]=(v*y-p*w-m*M)*j,e[8]=(p*E-g*y+m*x)*j,e):null},a.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e},a.sub=a.subtract,a.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},a.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],i=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=t[0],d=t[1],p=t[2],g=t[3],v=t[4],m=t[5],x=e[6],M=t[7],y=t[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-d)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(i-v)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(f-M)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))},t.exports=a},{"./common.js":23}],27:[function(e,t,r){var n=e("./common.js"),a={scalar:{},SIMD:{}};a.create=function(){var e=new n.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.clone=function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.fromValues=function(e,t,r,a,o,s,i,u,l,f,c,h,d,p,g,v){var m=new n.ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=r,m[3]=a,m[4]=o,m[5]=s,m[6]=i,m[7]=u,m[8]=l,m[9]=f,m[10]=c,m[11]=h,m[12]=d,m[13]=p,m[14]=g,m[15]=v,m},a.set=function(e,t,r,n,a,o,s,i,u,l,f,c,h,d,p,g,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=s,e[6]=i,e[7]=u,e[8]=l,e[9]=f,e[10]=c,e[11]=h,e[12]=d,e[13]=p,e[14]=g,e[15]=v,e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.scalar.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],o=t[6],s=t[7],i=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=a,e[13]=s,e[14]=i}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},a.SIMD.transpose=function(e,t){var r,n,a,o,s,i,u,l,f,c;return r=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.shuffle(r,n,0,1,4,5),i=SIMD.Float32x4.shuffle(a,o,0,1,4,5),u=SIMD.Float32x4.shuffle(s,i,0,2,4,6),l=SIMD.Float32x4.shuffle(s,i,1,3,5,7),SIMD.Float32x4.store(e,0,u),SIMD.Float32x4.store(e,4,l),s=SIMD.Float32x4.shuffle(r,n,2,3,6,7),i=SIMD.Float32x4.shuffle(a,o,2,3,6,7),f=SIMD.Float32x4.shuffle(s,i,0,2,4,6),c=SIMD.Float32x4.shuffle(s,i,1,3,5,7),SIMD.Float32x4.store(e,8,f),SIMD.Float32x4.store(e,12,c),e},a.transpose=n.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=t[6],l=t[7],f=t[8],c=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],m=t[15],x=r*i-n*s,M=r*u-a*s,y=r*l-o*s,b=n*u-a*i,E=n*l-o*i,w=a*l-o*u,I=f*g-c*p,S=f*v-h*p,F=f*m-d*p,D=c*v-h*g,_=c*m-d*g,A=h*m-d*v,j=x*A-M*_+y*D+b*F-E*S+w*I;return j?(j=1/j,e[0]=(i*A-u*_+l*D)*j,e[1]=(a*_-n*A-o*D)*j,e[2]=(g*w-v*E+m*b)*j,e[3]=(h*E-c*w-d*b)*j,e[4]=(u*F-s*A-l*S)*j,e[5]=(r*A-a*F+o*S)*j,e[6]=(v*y-p*w-m*M)*j,e[7]=(f*w-h*y+d*M)*j,e[8]=(s*_-i*F+l*I)*j,e[9]=(n*F-r*_-o*I)*j,e[10]=(p*E-g*y+m*x)*j,e[11]=(c*y-f*E-d*x)*j,e[12]=(i*S-s*D-u*I)*j,e[13]=(r*D-n*S+a*I)*j,e[14]=(g*M-p*b-v*x)*j,e[15]=(f*b-c*M+h*x)*j,e):null},a.SIMD.invert=function(e,t){var r,n,a,o,s,i,u,l,f,c,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),g=SIMD.Float32x4.load(t,12);return s=SIMD.Float32x4.shuffle(h,d,0,1,4,5),n=SIMD.Float32x4.shuffle(p,g,0,1,4,5),r=SIMD.Float32x4.shuffle(s,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,s,1,3,5,7),s=SIMD.Float32x4.shuffle(h,d,2,3,6,7),o=SIMD.Float32x4.shuffle(p,g,2,3,6,7),a=SIMD.Float32x4.shuffle(s,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,s,1,3,5,7),s=SIMD.Float32x4.mul(a,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),i=SIMD.Float32x4.mul(n,s),u=SIMD.Float32x4.mul(r,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),i),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.mul(n,a),s=SIMD.Float32x4.swizzle(s,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),i),f=SIMD.Float32x4.mul(r,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,s)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),s=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,s),i),l=SIMD.Float32x4.mul(r,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(a,s)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),s=SIMD.Float32x4.mul(r,n),s=SIMD.Float32x4.swizzle(s,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,s),f),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,s),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,s)),s=SIMD.Float32x4.mul(r,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,s)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,s),l),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,s),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,s)),s=SIMD.Float32x4.mul(r,a),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),u),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(n,s)),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,s)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,s),f),c=SIMD.Float32x4.mul(r,i),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),s=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(s,s),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(s,s))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(c,i)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(c,f)),e):null},a.invert=n.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],i=t[5],u=t[6],l=t[7],f=t[8],c=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],m=t[15];return e[0]=i*(h*m-d*v)-c*(u*m-l*v)+g*(u*d-l*h),e[1]=-(n*(h*m-d*v)-c*(a*m-o*v)+g*(a*d-o*h)),e[2]=n*(u*m-l*v)-i*(a*m-o*v)+g*(a*l-o*u),e[3]=-(n*(u*d-l*h)-i*(a*d-o*h)+c*(a*l-o*u)),e[4]=-(s*(h*m-d*v)-f*(u*m-l*v)+p*(u*d-l*h)),e[5]=r*(h*m-d*v)-f*(a*m-o*v)+p*(a*d-o*h),e[6]=-(r*(u*m-l*v)-s*(a*m-o*v)+p*(a*l-o*u)),e[7]=r*(u*d-l*h)-s*(a*d-o*h)+f*(a*l-o*u),e[8]=s*(c*m-d*g)-f*(i*m-l*g)+p*(i*d-l*c),e[9]=-(r*(c*m-d*g)-f*(n*m-o*g)+p*(n*d-o*c)),e[10]=r*(i*m-l*g)-s*(n*m-o*g)+p*(n*l-o*i),e[11]=-(r*(i*d-l*c)-s*(n*d-o*c)+f*(n*l-o*i)),e[12]=-(s*(c*v-h*g)-f*(i*v-u*g)+p*(i*h-u*c)),e[13]=r*(c*v-h*g)-f*(n*v-a*g)+p*(n*h-a*c),e[14]=-(r*(i*v-u*g)-s*(n*v-a*g)+p*(n*u-a*i)),e[15]=r*(i*h-u*c)-s*(n*h-a*c)+f*(n*u-a*i),e},a.SIMD.adjoint=function(e,t){var r,n,a,o,s,i,u,l,f,c,h,d,p,r=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12);return f=SIMD.Float32x4.shuffle(r,n,0,1,4,5),i=SIMD.Float32x4.shuffle(a,o,0,1,4,5),s=SIMD.Float32x4.shuffle(f,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,f,1,3,5,7),f=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(a,o,2,3,6,7),u=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(u,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.mul(i,f),h=SIMD.Float32x4.mul(s,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),c),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.mul(i,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),p=SIMD.Float32x4.mul(s,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),c),d=SIMD.Float32x4.mul(s,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,f)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(s,i),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),p),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,f)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,f),d),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(i,f)),f=SIMD.Float32x4.mul(s,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(i,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,f)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,f),p),SIMD.Float32x4.store(e,0,c),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,p),e},a.adjoint=n.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],i=e[6],u=e[7],l=e[8],f=e[9],c=e[10],h=e[11],d=e[12],p=e[13],g=e[14],v=e[15];return(t*s-r*o)*(c*v-h*g)-(t*i-n*o)*(f*v-h*p)+(t*u-a*o)*(f*g-c*p)+(r*i-n*s)*(l*v-h*d)-(r*u-a*s)*(l*g-c*d)+(n*u-a*i)*(l*p-f*d)},a.SIMD.multiply=function(e,t,r){var n=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),s=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.load(r,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),s))));SIMD.Float32x4.store(e,0,u);var l=SIMD.Float32x4.load(r,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),s))));SIMD.Float32x4.store(e,4,f);var c=SIMD.Float32x4.load(r,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),s))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(r,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),s))));return SIMD.Float32x4.store(e,12,p),e},a.scalar.multiply=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=t[9],d=t[10],p=t[11],g=t[12],v=t[13],m=t[14],x=t[15],M=r[0],y=r[1],b=r[2],E=r[3];return e[0]=M*n+y*i+b*c+E*g,e[1]=M*a+y*u+b*h+E*v,e[2]=M*o+y*l+b*d+E*m,e[3]=M*s+y*f+b*p+E*x,M=r[4],y=r[5],b=r[6],E=r[7],e[4]=M*n+y*i+b*c+E*g,e[5]=M*a+y*u+b*h+E*v,e[6]=M*o+y*l+b*d+E*m,e[7]=M*s+y*f+b*p+E*x,M=r[8],y=r[9],b=r[10],E=r[11],e[8]=M*n+y*i+b*c+E*g,e[9]=M*a+y*u+b*h+E*v,e[10]=M*o+y*l+b*d+E*m,e[11]=M*s+y*f+b*p+E*x,M=r[12],y=r[13],b=r[14],E=r[15],e[12]=M*n+y*i+b*c+E*g,e[13]=M*a+y*u+b*h+E*v,e[14]=M*o+y*l+b*d+E*m,e[15]=M*s+y*f+b*p+E*x,e},a.multiply=n.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(e,t,r){var n,a,o,s,i,u,l,f,c,h,d,p,g=r[0],v=r[1],m=r[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*m+t[12],e[13]=t[1]*g+t[5]*v+t[9]*m+t[13],e[14]=t[2]*g+t[6]*v+t[10]*m+t[14],e[15]=t[3]*g+t[7]*v+t[11]*m+t[15]):(n=t[0],a=t[1],o=t[2],s=t[3],i=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=t[9],d=t[10],p=t[11],e[0]=n,e[1]=a,e[2]=o,e[3]=s,e[4]=i,e[5]=u,e[6]=l,e[7]=f,e[8]=c,e[9]=h,e[10]=d,e[11]=p,e[12]=n*g+i*v+c*m+t[12],e[13]=a*g+u*v+h*m+t[13],e[14]=o*g+l*v+d*m+t[14],e[15]=s*g+f*v+p*m+t[15]),e},a.SIMD.translate=function(e,t,r){
var n=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),s=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4(r[0],r[1],r[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2));var u=SIMD.Float32x4.add(n,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,s)));return SIMD.Float32x4.store(e,12,u),e},a.translate=n.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(e,t,r){var n=r[0],a=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.SIMD.scale=function(e,t,r){var n,a,o,s=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0))),a=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,1,1,1,1))),o=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale=n.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(e,t,r,a){var o,s,i,u,l,f,c,h,d,p,g,v,m,x,M,y,b,E,w,I,S,F,D,_,A=a[0],j=a[1],C=a[2],H=Math.sqrt(A*A+j*j+C*C);return Math.abs(H)<n.EPSILON?null:(H=1/H,A*=H,j*=H,C*=H,o=Math.sin(r),s=Math.cos(r),i=1-s,u=t[0],l=t[1],f=t[2],c=t[3],h=t[4],d=t[5],p=t[6],g=t[7],v=t[8],m=t[9],x=t[10],M=t[11],y=A*A*i+s,b=j*A*i+C*o,E=C*A*i-j*o,w=A*j*i-C*o,I=j*j*i+s,S=C*j*i+A*o,F=A*C*i+j*o,D=j*C*i-A*o,_=C*C*i+s,e[0]=u*y+h*b+v*E,e[1]=l*y+d*b+m*E,e[2]=f*y+p*b+x*E,e[3]=c*y+g*b+M*E,e[4]=u*w+h*I+v*S,e[5]=l*w+d*I+m*S,e[6]=f*w+p*I+x*S,e[7]=c*w+g*I+M*S,e[8]=u*F+h*D+v*_,e[9]=l*F+d*D+m*_,e[10]=f*F+p*D+x*_,e[11]=c*F+g*D+M*_,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},a.scalar.rotateX=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[4],s=t[5],i=t[6],u=t[7],l=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+l*n,e[5]=s*a+f*n,e[6]=i*a+c*n,e[7]=u*a+h*n,e[8]=l*a-o*n,e[9]=f*a-s*n,e[10]=c*a-i*n,e[11]=h*a-u*n,e},a.SIMD.rotateX=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),s=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,a),SIMD.Float32x4.mul(o,n))),e},a.rotateX=n.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],s=t[1],i=t[2],u=t[3],l=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-l*n,e[1]=s*a-f*n,e[2]=i*a-c*n,e[3]=u*a-h*n,e[8]=o*n+l*a,e[9]=s*n+f*a,e[10]=i*n+c*a,e[11]=u*n+h*a,e},a.SIMD.rotateY=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(s,a))),e},a.rotateY=n.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],s=t[1],i=t[2],u=t[3],l=t[4],f=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+l*n,e[1]=s*a+f*n,e[2]=i*a+c*n,e[3]=u*a+h*n,e[4]=l*a-o*n,e[5]=f*a-s*n,e[6]=c*a-i*n,e[7]=h*a-u*n,e},a.SIMD.rotateZ=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,a),SIMD.Float32x4.mul(o,n))),e},a.rotateZ=n.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotation=function(e,t,r){var a,o,s,i=r[0],u=r[1],l=r[2],f=Math.sqrt(i*i+u*u+l*l);return Math.abs(f)<n.EPSILON?null:(f=1/f,i*=f,u*=f,l*=f,a=Math.sin(t),o=Math.cos(t),s=1-o,e[0]=i*i*s+o,e[1]=u*i*s+l*a,e[2]=l*i*s-u*a,e[3]=0,e[4]=i*u*s-l*a,e[5]=u*u*s+o,e[6]=l*u*s+i*a,e[7]=0,e[8]=i*l*s+u*a,e[9]=u*l*s-i*a,e[10]=l*l*s+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},a.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotationTranslation=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=n+n,u=a+a,l=o+o,f=n*i,c=n*u,h=n*l,d=a*u,p=a*l,g=o*l,v=s*i,m=s*u,x=s*l;return e[0]=1-(d+g),e[1]=c+x,e[2]=h-m,e[3]=0,e[4]=c-x,e[5]=1-(f+g),e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-(f+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},a.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},a.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},a.fromRotationTranslationScale=function(e,t,r,n){var a=t[0],o=t[1],s=t[2],i=t[3],u=a+a,l=o+o,f=s+s,c=a*u,h=a*l,d=a*f,p=o*l,g=o*f,v=s*f,m=i*u,x=i*l,M=i*f,y=n[0],b=n[1],E=n[2];return e[0]=(1-(p+v))*y,e[1]=(h+M)*y,e[2]=(d-x)*y,e[3]=0,e[4]=(h-M)*b,e[5]=(1-(c+v))*b,e[6]=(g+m)*b,e[7]=0,e[8]=(d+x)*E,e[9]=(g-m)*E,e[10]=(1-(c+p))*E,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},a.fromRotationTranslationScaleOrigin=function(e,t,r,n,a){var o=t[0],s=t[1],i=t[2],u=t[3],l=o+o,f=s+s,c=i+i,h=o*l,d=o*f,p=o*c,g=s*f,v=s*c,m=i*c,x=u*l,M=u*f,y=u*c,b=n[0],E=n[1],w=n[2],I=a[0],S=a[1],F=a[2];return e[0]=(1-(g+m))*b,e[1]=(d+y)*b,e[2]=(p-M)*b,e[3]=0,e[4]=(d-y)*E,e[5]=(1-(h+m))*E,e[6]=(v+x)*E,e[7]=0,e[8]=(p+M)*w,e[9]=(v-x)*w,e[10]=(1-(h+g))*w,e[11]=0,e[12]=r[0]+I-(e[0]*I+e[4]*S+e[8]*F),e[13]=r[1]+S-(e[1]*I+e[5]*S+e[9]*F),e[14]=r[2]+F-(e[2]*I+e[6]*S+e[10]*F),e[15]=1,e},a.fromQuat=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=r+r,i=n+n,u=a+a,l=r*s,f=n*s,c=n*i,h=a*s,d=a*i,p=a*u,g=o*s,v=o*i,m=o*u;return e[0]=1-c-p,e[1]=f+m,e[2]=h-v,e[3]=0,e[4]=f-m,e[5]=1-l-p,e[6]=d+g,e[7]=0,e[8]=h+v,e[9]=d-g,e[10]=1-l-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.frustum=function(e,t,r,n,a,o,s){var i=1/(r-t),u=1/(a-n),l=1/(o-s);return e[0]=2*o*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*i,e[9]=(a+n)*u,e[10]=(s+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*l,e[15]=0,e},a.perspective=function(e,t,r,n,a){var o=1/Math.tan(t/2),s=1/(n-a);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+n)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*n*s,e[15]=0,e},a.perspectiveFromFieldOfView=function(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+i),l=2/(a+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(s-i)*u*.5,e[9]=(a-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},a.ortho=function(e,t,r,n,a,o,s){var i=1/(t-r),u=1/(n-a),l=1/(o-s);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*i,e[13]=(a+n)*u,e[14]=(s+o)*l,e[15]=1,e},a.lookAt=function(e,t,r,o){var s,i,u,l,f,c,h,d,p,g,v=t[0],m=t[1],x=t[2],M=o[0],y=o[1],b=o[2],E=r[0],w=r[1],I=r[2];return Math.abs(v-E)<n.EPSILON&&Math.abs(m-w)<n.EPSILON&&Math.abs(x-I)<n.EPSILON?a.identity(e):(h=v-E,d=m-w,p=x-I,g=1/Math.sqrt(h*h+d*d+p*p),h*=g,d*=g,p*=g,s=y*p-b*d,i=b*h-M*p,u=M*d-y*h,g=Math.sqrt(s*s+i*i+u*u),g?(g=1/g,s*=g,i*=g,u*=g):(s=0,i=0,u=0),l=d*u-p*i,f=p*s-h*u,c=h*i-d*s,g=Math.sqrt(l*l+f*f+c*c),g?(g=1/g,l*=g,f*=g,c*=g):(l=0,f=0,c=0),e[0]=s,e[1]=l,e[2]=h,e[3]=0,e[4]=i,e[5]=f,e[6]=d,e[7]=0,e[8]=u,e[9]=c,e[10]=p,e[11]=0,e[12]=-(s*v+i*m+u*x),e[13]=-(l*v+f*m+c*x),e[14]=-(h*v+d*m+p*x),e[15]=1,e)},a.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e},a.sub=a.subtract,a.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},a.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],i=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=e[9],d=e[10],p=e[11],g=e[12],v=e[13],m=e[14],x=e[15],M=t[0],y=t[1],b=t[2],E=t[3],w=t[4],I=t[5],S=t[6],F=t[7],D=t[8],_=t[9],A=t[10],j=t[11],C=t[12],H=t[13],N=t[14],O=t[15];return Math.abs(r-M)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(a-y)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-b)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-E)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(i-w)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-I)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-S)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-F)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(c-D)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(h-_)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(d-A)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-j)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(g-C)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(v-H)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))&&Math.abs(m-N)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(x-O)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(O))},t.exports=a},{"./common.js":23}],28:[function(e,t,r){var n=e("./common.js"),a=e("./mat3.js"),o=e("./vec3.js"),s=e("./vec4.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},i.rotationTo=function(){var e=o.create(),t=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,a,s){var u=o.dot(a,s);return u<-.999999?(o.cross(e,t,a),o.length(e)<1e-6&&o.cross(e,r,a),o.normalize(e,e),i.setAxisAngle(n,e,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(e,a,s),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+u,i.normalize(n,n))}}(),i.setAxes=function(){var e=a.create();return function(t,r,n,a){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],i.normalize(t,i.fromMat3(t,e))}}(),i.clone=s.clone,i.fromValues=s.fromValues,i.copy=s.copy,i.set=s.set,i.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},i.setAxisAngle=function(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e},i.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return 0!=n?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r},i.add=s.add,i.multiply=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3],i=r[0],u=r[1],l=r[2],f=r[3];return e[0]=n*f+s*i+a*l-o*u,e[1]=a*f+s*u+o*i-n*l,e[2]=o*f+s*l+n*u-a*i,e[3]=s*f-n*i-a*u-o*l,e},i.mul=i.multiply,i.scale=s.scale,i.rotateX=function(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],s=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=n*u+s*i,e[1]=a*u+o*i,e[2]=o*u-a*i,e[3]=s*u-n*i,e},i.rotateY=function(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],s=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=n*u-o*i,e[1]=a*u+s*i,e[2]=o*u+n*i,e[3]=s*u-a*i,e},i.rotateZ=function(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],s=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*i,e[1]=a*u-n*i,e[2]=o*u+s*i,e[3]=s*u-o*i,e},i.calculateW=function(e,t){var r=t[0],n=t[1],a=t[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e},i.dot=s.dot,i.lerp=s.lerp,i.slerp=function(e,t,r,n){var a,o,s,i,u,l=t[0],f=t[1],c=t[2],h=t[3],d=r[0],p=r[1],g=r[2],v=r[3];return o=l*d+f*p+c*g+h*v,o<0&&(o=-o,d=-d,p=-p,g=-g,v=-v),1-o>1e-6?(a=Math.acos(o),s=Math.sin(a),i=Math.sin((1-n)*a)/s,u=Math.sin(n*a)/s):(i=1-n,u=n),e[0]=i*l+u*d,e[1]=i*f+u*p,e[2]=i*c+u*g,e[3]=i*h+u*v,e},i.sqlerp=function(){var e=i.create(),t=i.create();return function(r,n,a,o,s,u){return i.slerp(e,n,s,u),i.slerp(t,a,o,u),i.slerp(r,e,t,2*u*(1-u)),r}}(),i.invert=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=r*r+n*n+a*a+o*o,i=s?1/s:0;return e[0]=-r*i,e[1]=-n*i,e[2]=-a*i,e[3]=o*i,e},i.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},i.length=s.length,i.len=i.length,i.squaredLength=s.squaredLength,i.sqrLen=i.squaredLength,i.normalize=s.normalize,i.fromMat3=function(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var o=(a+1)%3,s=(a+2)%3;r=Math.sqrt(t[3*a+a]-t[3*o+o]-t[3*s+s]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*o+s]-t[3*s+o])*r,e[o]=(t[3*o+a]+t[3*a+o])*r,e[s]=(t[3*s+a]+t[3*a+s])*r}return e},i.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.exactEquals=s.exactEquals,i.equals=s.equals,t.exports=i},{"./common.js":23,"./mat3.js":26,"./vec3.js":30,"./vec4.js":31}],29:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,r){return e[0]=t,e[1]=r,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},a.div=a.divide,a.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},a.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},a.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},a.normalize=function(e,t){var r=t[0],n=t[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},a.lerp=function(e,t,r,n){var a=t[0],o=t[1];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e},a.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},a.transformMat2=function(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a,e[1]=r[1]*n+r[3]*a,e},a.transformMat2d=function(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a+r[4],e[1]=r[1]*n+r[3]*a+r[5],e},a.transformMat3=function(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[3]*a+r[6],e[1]=r[1]*n+r[4]*a+r[7],e},a.transformMat4=function(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e},a.forEach=function(){var e=a.create();return function(t,r,n,a,o,s){var i,u;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,i=n;i<u;i+=r)e[0]=t[i],e[1]=t[i+1],o(e,e,s),t[i]=e[0],t[i+1]=e[1];return t}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},a.equals=function(e,t){var r=e[0],a=e[1],o=t[0],s=t[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))},t.exports=a},{"./common.js":23}],30:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.fromValues=function(e,t,r){var a=new n.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=r,a},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},a.div=a.divide,a.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},a.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},a.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(r*r+n*n+a*a)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},a.normalize=function(e,t){var r=t[0],n=t[1],a=t[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.cross=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=r[0],i=r[1],u=r[2];return e[0]=a*u-o*i,e[1]=o*s-n*u,e[2]=n*i-a*s,e},a.lerp=function(e,t,r,n){var a=t[0],o=t[1],s=t[2];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e},a.hermite=function(e,t,r,n,a,o){var s=o*o,i=s*(2*o-3)+1,u=s*(o-2)+o,l=s*(o-1),f=s*(3-2*o);return e[0]=t[0]*i+r[0]*u+n[0]*l+a[0]*f,e[1]=t[1]*i+r[1]*u+n[1]*l+a[1]*f,e[2]=t[2]*i+r[2]*u+n[2]*l+a[2]*f,e},a.bezier=function(e,t,r,n,a,o){var s=1-o,i=s*s,u=o*o,l=i*s,f=3*o*i,c=3*u*s,h=u*o;return e[0]=t[0]*l+r[0]*f+n[0]*c+a[0]*h,e[1]=t[1]*l+r[1]*f+n[1]*c+a[1]*h,e[2]=t[2]*l+r[2]*f+n[2]*c+a[2]*h,e},a.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,a=2*n.RANDOM()-1,o=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=a*t,e},a.transformMat4=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=r[3]*n+r[7]*a+r[11]*o+r[15];return s=s||1,e[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/s,e[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/s,e[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/s,e},a.transformMat3=function(e,t,r){var n=t[0],a=t[1],o=t[2];return e[0]=n*r[0]+a*r[3]+o*r[6],e[1]=n*r[1]+a*r[4]+o*r[7],e[2]=n*r[2]+a*r[5]+o*r[8],e},a.transformQuat=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=r[0],i=r[1],u=r[2],l=r[3],f=l*n+i*o-u*a,c=l*a+u*n-s*o,h=l*o+s*a-i*n,d=-s*n-i*a-u*o;return e[0]=f*l+d*-s+c*-u-h*-i,e[1]=c*l+d*-i+h*-s-f*-u,e[2]=h*l+d*-u+f*-i-c*-s,e},a.rotateX=function(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},a.rotateY=function(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},a.rotateZ=function(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},a.forEach=function(){var e=a.create();return function(t,r,n,a,o,s){var i,u;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,i=n;i<u;i+=r)e[0]=t[i],e[1]=t[i+1],e[2]=t[i+2],o(e,e,s),t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2];return t}}(),a.angle=function(e,t){var r=a.fromValues(e[0],e[1],e[2]),n=a.fromValues(t[0],t[1],t[2]);a.normalize(r,r),a.normalize(n,n);var o=a.dot(r,n);return o>1?0:Math.acos(o)},a.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=t[0],i=t[1],u=t[2];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-i)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=a},{"./common.js":23}],31:[function(e,t,r){var n=e("./common.js"),a={};a.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,r,a){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=a,o},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},a.div=a.divide,a.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},a.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},a.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+n*n+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.sqrt(t*t+r*r+n*n+a*a)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},a.normalize=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],s=r*r+n*n+a*a+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=r*s,e[1]=n*s,e[2]=a*s,e[3]=o*s),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,r,n){var a=t[0],o=t[1],s=t[2],i=t[3];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e[3]=i+n*(r[3]-i),e},a.random=function(e,t){return t=t||1,e[0]=n.RANDOM(),e[1]=n.RANDOM(),e[2]=n.RANDOM(),e[3]=n.RANDOM(),a.normalize(e,e),a.scale(e,e,t),e},a.transformMat4=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*s,e[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*s,e[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*s,e[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*s,e},a.transformQuat=function(e,t,r){var n=t[0],a=t[1],o=t[2],s=r[0],i=r[1],u=r[2],l=r[3],f=l*n+i*o-u*a,c=l*a+u*n-s*o,h=l*o+s*a-i*n,d=-s*n-i*a-u*o;return e[0]=f*l+d*-s+c*-u-h*-i,e[1]=c*l+d*-i+h*-s-f*-u,e[2]=h*l+d*-u+f*-i-c*-s,e[3]=t[3],e},a.forEach=function(){var e=a.create();return function(t,r,n,a,o,s){var i,u;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,i=n;i<u;i+=r)e[0]=t[i],e[1]=t[i+1],e[2]=t[i+2],e[3]=t[i+3],o(e,e,s),t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3];return t}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},a.equals=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],i=t[0],u=t[1],l=t[2],f=t[3];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-f)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))},t.exports=a},{"./common.js":23}],32:[function(e,t,r){r.stlSerializer=e("./lgp/stl-serializer"),r.stlDeserializer=e("./lgp/stl-deserializer"),r.objSerializer=e("./lgp/obj-serializer"),r.objDeserializer=e("./lgp/obj-deserializer"),r.svgSerializer=e("./lgp/svg-serializer"),r.imageWriter=e("./lgp/image-writer"),r.fileReader=e("./lgp/file-reader"),r.fileWriter=e("./lgp/file-writer")},{"./lgp/file-reader":33,"./lgp/file-writer":34,"./lgp/image-writer":35,"./lgp/obj-deserializer":36,"./lgp/obj-serializer":37,"./lgp/stl-deserializer":38,"./lgp/stl-serializer":39,"./lgp/svg-serializer":40}],33:[function(e,t,r){t.exports=function(e,t){var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&200===r.status&&t&&t(r.responseText)},r.send()}},{}],34:[function(e,t,r){t.exports=function(e,t){var r=document.createElement("a");if(r.href=URL.createObjectURL(new Blob([t],{type:"text/plain"})),r.download=e,document.body.appendChild(r),document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),r.dispatchEvent(n)}else r.click()}},{}],35:[function(e,t,r){function n(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return new Blob([n],{type:r})}t.exports=function(e,t){var r=document.createElement("a");if(r.href=URL.createObjectURL(n(t)),r.download=e,document.body.appendChild(r),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),r.dispatchEvent(a)}else r.click()}},{}],36:[function(e,t,r){t.exports=function(e,t){t=t||{};for(var r,n,a=t.scale?t.scale:1,o=t.flipYZ?-1:1,s=!!t.flipYZ,i=[],u=[],l=[],f=[],c=[],h=[],d=e.split("\n"),p=d.length,g=0;g<p;g++)if(r=d[g],n=r.match(/^v\s*(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/)){var v=[];v.push(a*parseFloat(n[1])),v.push(a*parseFloat(n[s?3:2])),v.push(a*parseFloat(n[s?2:3])),i.push(v)}else if(n=r.match(/^vn\s*(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/)){var v=[];v.push(o*parseFloat(n[1])),v.push(o*parseFloat(n[s?3:2])),v.push(o*parseFloat(n[s?2:3])),u.push(v)}else if(n=r.match(/^vt\s*(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/)){var m=[];m.push(parseFloat(n[1])),m.push(parseFloat(n[2])),l.push(m)}else if(n=r.match(/^vt\s*(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/)){var m=[];m.push(parseFloat(n[1])),m.push(parseFloat(n[2])),m.push(parseFloat(n[3])),l.push(m)}else if(n=r.match(/^f\s*(.*)/)){for(var x=n[1].split(" "),M=x.length,y=[],b=[],E=[],w=0;w<M;w++){var I=x[w],S=I.match(/^(\d+)$/);S?y.push(parseInt(S[1])-1):(S=I.match(/^(\d+)\/(\d+)$/),S?(y.push(parseInt(S[1])-1),b.push(parseInt(S[2])-1)):(S=I.match(/^(\d+)\/(\d+)\/(\d+)$/),S?(y.push(parseInt(S[1])-1),b.push(parseInt(S[2])-1),E.push(parseInt(S[3])-1)):(S=I.match(/^(\d+)\/\/(\d+)$/))&&(y.push(parseInt(S[1])-1),E.push(parseInt(S[2])-1))))}y.length&&f.push(y),b.length&&h.push(b),E.length&&c.push(E)}return{positions:i,normals:u,texcoords:l,cells:f,tcells:h,ncells:c}}},{}],37:[function(e,t,r){function n(e,t){if(void 0===e.positions||void 0===e.cells)throw"Input Not Valid: Does not contain any positions or cells";var r=void 0===e.name?"model"+t:e.name,n=e.cells,a=e.positions,o="g "+r+"\n",s="",i=""
;if(a[0].constructor===Number)for(var u=0;u<a.length;u+=3)s+="v "+a[u]+" "+a[u+1]+" "+a[u+2]+"\n";else for(var u=0;u<a.length;u++)s+="v "+a[u][0]+" "+a[u][1]+" "+a[u][2]+"\n";if(n[0].constructor===Number)for(var u=0;u<n.length;u+=3){var l=n[u]+1,f=n[u+1]+1,c=n[u+2]+1;i+="f "+l+"//"+l+" "+f+"//"+f+" "+c+"//"+c+"\n"}else for(var u=0;u<n.length;u++){var l=n[u][0]+1,f=n[u][1]+1,c=n[u][2]+1;i+="f "+l+"//"+l+" "+f+"//"+f+" "+c+"//"+c+"\n"}return o+=s,o+="",o+=i}t.exports=function(e){if(e.constructor===Array){for(var t="",r=0;r<e.length;r++)t+=n(e[0],r);return t}return n(e,0)}},{}],38:[function(e,t,r){t.exports=function(e,t){t=t||{};for(var r,n,a,o,s,i=t.scale?t.scale:1,u=!!t.flipYZ,l=[],f=e.split("\n"),c=f.length,h=0;h<c;h++){s=f[h];var d=s.match(/^solid\s(.*)$/);if(d)r={name:d[1],normals:[],positions:[]};else if(d=s.match(/^\s*facet\snormal\s(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/))n=parseFloat(d[1]),a=parseFloat(d[u?3:2]),o=parseFloat(d[u?2:3]),r.normals.push([n,a,o]),r.normals.push([n,a,o]),r.normals.push([n,a,o]);else if(d=s.match(/^\s*vertex\s(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)[,|\s]?\s?(-?\d*\.?\d*e*[-\+]*\d*)\s*$/))r.positions.push([i*parseFloat(d[1]),i*parseFloat(d[u?3:2]),i*parseFloat(d[u?2:3])]);else{var d=s.match(/^endsolid\s(.*)$/);d&&l.push(r)}}return l}},{}],39:[function(e,t,r){function n(e,t){if(void 0===e.positions||void 0===e.cells)throw"Input Not Valid: Does not contain any positions or cells";var r=void 0===e.name?"model"+t:e.name,n=e.cells[0].constructor===Array?a(e.cells):e.cells,s=e.positions,i=e.positions[0].constructor;i!==Array&&i!=Float32Array||(s=a(e.positions));var u=void 0;u=void 0!=e.normals?e.normals[0].constructor===Array?a(e.normals):e.normals:o(s,n);for(var l,f,c,h="solid "+r+"\n",d=0;d<n.length;d+=3)l=3*n[d],f=3*n[d+1],c=3*n[d+2],h+="facet normal "+u[d]+" "+u[d+1]+" "+u[d+2]+"\n",h+="\touter loop \n",h+="\t\tvertex "+s[l]+" "+s[l+1]+" "+s[l+2]+"\n",h+="\t\tvertex "+s[f]+" "+s[f+1]+" "+s[f+2]+"\n",h+="\t\tvertex "+s[c]+" "+s[c+1]+" "+s[c+2]+"\n",h+="\tendloop \n",h+="endfacet \n";return h+="endsolid\n"}var a=e("guf").normalizeArray,o=e("guf").faceNormals;t.exports=function(e){if(e.constructor===Array){for(var t="",r=0;r<e.length;r++)t+=n(e[0],r);return t}return n(e,0)}},{guf:47}],40:[function(e,t,r){function n(e){if(void 0===e.polyline&&void 0===e.polygon)throw"Input Not Valid: Does not contain any polylines or polygons";var t=e.polyline,r=void 0!==e.size?e.size:3,n=void 0!==e.stroke?e.stroke:"black",u=void 0!==e.strokeWidth?e.strokeWidth:"1",l=void 0!==e.fill?e.fill:"none",f="polyline";void 0===t&&(t=e.polygon,f="polygon");var c;t[0].constructor===Array?(c=o(t),r=3):c=t;var h=a(c),d=h[0],p=h[1],g=p[0]-d[0],v=d[1]-p[1];g>s&&(s=g),v>i&&(i=v),d[0]*=-1;for(var m=c.length,x="\t<"+f+' points="',M=0;M<m;M+=r)x+=d[0]+c[M]+",",x+=d[1]+-1*c[M+1],x+=M+r<m?" ":'" ';return x+='stroke="'+n,x+='" stroke-width="'+u,x+='" fill="'+l,x+='" />\n'}function a(e){for(var t=[1e8,-1e8],r=[-1e8,1e8],n=e.length,a=0;a<n;a+=3){var o=e[a],s=e[a+1];o<t[0]&&(t[0]=o),o>r[0]&&(r[0]=o),s>t[1]&&(t[1]=s),s<r[1]&&(r[1]=s)}return[t,r]}var o=e("guf").normalizeArray,s=-1,i=-1;t.exports=function(e){var t="";if(s=-1,i=-1,e.constructor===Array)for(var r=0;r<e.length;r++)t+=n(e[0]);else t+=n(e);var a="<svg ";return a+='width="'+s+'" ',a+='height="'+i+'" ',a+='xmlns="http://www.w3.org/2000/svg" version="1.1">\n',a+=t,a+="</svg>\n"}},{guf:47}],41:[function(e,t,r){var n=e("./cross"),a=e("./normalize");t.exports=function(e,t,r){var o=[0,0,0];return n(o,e,t,r),a(o,o),o}},{"./cross":42,"./normalize":45}],42:[function(e,t,r){t.exports=function(e,t,r,n){var a=r[0]-t[0],o=r[1]-t[1],s=r[2]-t[2],i=n[0]-t[0],u=n[1]-t[1],l=n[2]-t[2];return e[0]=o*l-s*u,e[1]=s*i-a*l,e[2]=a*u-o*i,e}},{}],43:[function(e,t,r){var n=e("guf").normalizeArray,a=e("./calculate-normal");t.exports=function(e,t){var r=e,o=e[0].constructor;o!==Array&&o!=Float32Array||(r=n(e));for(var s,i,u,l=t[0].constructor===Array?n(t):t,f=[],c=[],h=[],d=[],p=[],g=0;g<l.length;g+=3)s=3*l[g],i=3*l[g+1],u=3*l[g+2],c[0]=r[s],c[1]=r[s+1],c[2]=r[s+2],h[0]=r[i],h[1]=r[i+1],h[2]=r[i+2],d[0]=r[u],d[1]=r[u+1],d[2]=r[u+2],p=a(c,h,d),f[g]=p[0],f[g+1]=p[1],f[g+2]=p[2];return f}},{"./calculate-normal":41,guf:47}],44:[function(e,t,r){t.exports=function(e){for(var t=[],r=e.length,n=e[0].length,a=n<3,o=0;o<r;o++){for(var s=0;s<n;s++)t.push(e[o][s]);a&&t.push(0)}return t}},{}],45:[function(e,t,r){t.exports=function(e,t){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r,e}},{}],46:[function(e,t,r){var n=e("./cross"),a=e("./normalize"),o=e("./normalize-array");t.exports=function(e,t){for(var r=e[0].constructor===Array?o(e):e,s=t[0].constructor===Array?o(t):t,i={},u=r.length/3,l=0;l<u;l++)i[l]=[];for(var f,c,h,d,p=s.length,l=0;l<p;l+=3)d=l,f=d,c=d+1,h=d+2,i[s[f]].push(l),i[s[c]].push(l),i[s[h]].push(l);for(var g,v,m,x=[],M=[0,0,0],y=[0,0,0],b=Object.keys(i),E=[0,0,0],w=[0,0,0],I=[0,0,0],l=0;l<b.length;l++){for(var t=i[b[l]],S=0;S<t.length;S++){var d=t[S];g=s[d],v=s[d+1],m=s[d+2],E[0]=r[3*g],E[1]=r[3*g+1],E[2]=r[3*g+2],w[0]=r[3*v],w[1]=r[3*v+1],w[2]=r[3*v+2],I[0]=r[3*m],I[1]=r[3*m+1],I[2]=r[3*m+2],n(M,E,w,I),y[0]+=M[0],y[1]+=M[1],y[2]+=M[2]}a(y,y),x.push(y[0],y[1],y[2]),y[0]=0,y[1]=0,y[2]=0}return x}},{"./cross":42,"./normalize":45,"./normalize-array":44}],47:[function(e,t,r){r.normalizeArray=e("./guf/normalize-array"),r.faceNormals=e("./guf/face-normals"),r.vertexNormals=e("./guf/vertex-normals"),r.calculateNormal=e("./guf/calculate-normal"),r.cross=e("./guf/cross"),r.normalize=e("./guf/normalize")},{"./guf/calculate-normal":41,"./guf/cross":42,"./guf/face-normals":43,"./guf/normalize":45,"./guf/normalize-array":44,"./guf/vertex-normals":46}],48:[function(e,t,r){r.Edge=e("./mda/Core/Edge.js"),r.HalfEdge=e("./mda/Core/HalfEdge.js"),r.Vertex=e("./mda/Core/Vertex.js"),r.Face=e("./mda/Core/Face.js"),r.Mesh=e("./mda/Core/Mesh.js"),r.Integrity=e("./mda/Integrity/Integrity.js"),r.MeshIntegrity=e("./mda/Integrity/MeshIntegrity.js"),r.FaceIntegrity=e("./mda/Integrity/FaceIntegrity.js"),r.EdgeIntegrity=e("./mda/Integrity/EdgeIntegrity.js"),r.HalfEdgeIntegrity=e("./mda/Integrity/HalfEdgeIntegrity.js"),r.VertexIntegrity=e("./mda/Integrity/VertexIntegrity.js"),r.HalfEdgePrev=e("./mda/Queries/HalfEdgePrev.js"),r.EdgeVertices=e("./mda/Queries/EdgeVertices.js"),r.FaceHalfEdges=e("./mda/Queries/FaceHalfEdges.js"),r.FaceVertices=e("./mda/Queries/FaceVertices.js"),r.VertexFaces=e("./mda/Queries/VertexFaces.js"),r.VertexHalfEdges=e("./mda/Queries/VertexHalfEdges.js"),r.VertexNeighbors=e("./mda/Queries/VertexNeighbors.js"),r.MeshCentroid=e("./mda/Queries/MeshCentroid.js"),r.InsertVertexOperator=e("./mda/Operators/InsertVertex.js"),r.InsertEdgeOperator=e("./mda/Operators/InsertEdge.js"),r.DeleteEdgeOperator=e("./mda/Operators/DeleteEdge.js"),r.LoopOperator=e("./mda/Operators/Loop.js"),r.CatmullClarkOperator=e("./mda/Operators/CatmullClark.js"),r.QuadSubdivideOperator=e("./mda/Operators/QuadSubdivide.js"),r.TriangulateOperator=e("./mda/Operators/Triangulate.js"),r.ExtrudeOperator=e("./mda/Operators/Extrude.js"),r.PipeOperator=e("./mda/Operators/Pipe.js"),r.DuplicateOperator=e("./mda/Operators/Duplicate.js"),r.CombineOperator=e("./mda/Operators/Combine.js"),r.ScaleOperator=e("./mda/Operators/Scale.js"),r.MoveOperator=e("./mda/Operators/Move.js"),r.InvertOperator=e("./mda/Operators/Invert.js"),r.WireframeOperator=e("./mda/Operators/Wireframe.js"),r.CreateFaceOperator=e("./mda/Operators/CreateFace.js"),r.ProfileGenerator=e("./mda/Generators/Profile.js")},{"./mda/Core/Edge.js":49,"./mda/Core/Face.js":50,"./mda/Core/HalfEdge.js":51,"./mda/Core/Mesh.js":52,"./mda/Core/Vertex.js":53,"./mda/Generators/Profile.js":54,"./mda/Integrity/EdgeIntegrity.js":55,"./mda/Integrity/FaceIntegrity.js":56,"./mda/Integrity/HalfEdgeIntegrity.js":57,"./mda/Integrity/Integrity.js":58,"./mda/Integrity/MeshIntegrity.js":59,"./mda/Integrity/VertexIntegrity.js":60,"./mda/Operators/CatmullClark.js":61,"./mda/Operators/Combine.js":62,"./mda/Operators/CreateFace.js":63,"./mda/Operators/DeleteEdge.js":64,"./mda/Operators/Duplicate.js":65,"./mda/Operators/Extrude.js":66,"./mda/Operators/InsertEdge.js":67,"./mda/Operators/InsertVertex.js":68,"./mda/Operators/Invert.js":69,"./mda/Operators/Loop.js":70,"./mda/Operators/Move.js":71,"./mda/Operators/Pipe.js":72,"./mda/Operators/QuadSubdivide.js":73,"./mda/Operators/Scale.js":74,"./mda/Operators/Triangulate.js":75,"./mda/Operators/Wireframe.js":76,"./mda/Queries/EdgeVertices.js":77,"./mda/Queries/FaceHalfEdges.js":78,"./mda/Queries/FaceVertices.js":79,"./mda/Queries/HalfEdgePrev.js":80,"./mda/Queries/MeshCentroid.js":81,"./mda/Queries/VertexFaces.js":82,"./mda/Queries/VertexHalfEdges.js":83,"./mda/Queries/VertexNeighbors.js":84}],49:[function(e,t,r){function n(){this.halfEdge=void 0,this.index=-1}n.prototype.setIndex=function(e){this.index=e},n.prototype.getIndex=function(){return this.index},n.prototype.setHalfEdge=function(e){this.halfEdge=e},n.prototype.getHalfEdge=function(){return this.halfEdge},t.exports=n},{}],50:[function(e,t,r){function n(){this.halfEdge=void 0,this.index=-1}n.prototype.setIndex=function(e){this.index=e},n.prototype.getIndex=function(){return this.index},n.prototype.setHalfEdge=function(e){this.halfEdge=e},n.prototype.getHalfEdge=function(){return this.halfEdge},t.exports=n},{}],51:[function(e,t,r){function n(){this.nextHalfEdge=void 0,this.flipHalfEdge=void 0,this.vertex=void 0,this.edge=void 0,this.face=void 0}n.prototype.setVertex=function(e){this.vertex=e},n.prototype.getVertex=function(){return this.vertex},n.prototype.setFace=function(e){this.face=e},n.prototype.getFace=function(){return this.face},n.prototype.setEdge=function(e){this.edge=e},n.prototype.getEdge=function(){return this.edge},n.prototype.setNextHalfEdge=function(e){this.nextHalfEdge=e},n.prototype.getNextHalfEdge=function(){return this.nextHalfEdge},n.prototype.setFlipHalfEdge=function(e){this.flipHalfEdge=e},n.prototype.getFlipHalfEdge=function(){return this.flipHalfEdge},n.prototype.onBoundary=function(){return!this.getFlipHalfEdge()},t.exports=n},{}],52:[function(e,t,r){function n(){this.halfEdges=[],this.vertices=[],this.edges=[],this.faces=[],this.boundaries=[],this.positions=[],this.cells=[],this.edgeMap={}}var a=(e("gl-matrix").vec3,e("./Vertex")),o=e("./Edge"),s=e("./HalfEdge"),i=e("./Face");n.prototype.getFaces=function(){return this.faces},n.prototype.getEdges=function(){return this.edges},n.prototype.getEdgeMap=function(){return this.edgeMap},n.prototype.getVertices=function(){return this.vertices},n.prototype.getHalfEdges=function(){return this.halfEdges},n.prototype.getEdgeKey=function(e,t){return e+"-"+t},n.prototype.getEdgeKeys=function(e,t){return[this.getEdgeKey(e,t),this.getEdgeKey(t,e)]},n.prototype.containsEdge=function(e,t){var r=this.edgeMap,n=this.getEdgeKeys(e,t);return void 0!==r[n[0]]&&void 0!==r[n[1]]},n.prototype.getEdge=function(e,t){var r=this.edgeMap,n=this.getEdgeKeys(e,t);if(void 0!==r[n[0]]&&void 0!==r[n[1]])return r[n[0]]},n.prototype.setPositions=function(e){this.positions=e;for(var t=e.length,r=0;r<t;r++){var n=new a;n.setIndex(r),this.vertices.push(n)}},n.prototype.getPositions=function(){for(var e=[],t=this.vertices,r=this.positions,n=t.length,a=0;a<n;a++){var o=t[a].getIndex();e.push(r[o])}return e},n.prototype.setCells=function(e){this.cells=e.slice();for(var t=e.length,r=0;r<t;r++){var n=new i;n.setIndex(r),this.faces.push(n)}this.buildEdgeMap()},n.prototype.getCells=function(){for(var e=[],t=this.faces,r=(this.vertices,t.length),n=0;n<r;n++){var a=t[n],o=halfEdge=a.getHalfEdge(),s=[];do{var i=halfEdge.getVertex(),u=i.getIndex();s.push(u),halfEdge=halfEdge.getNextHalfEdge()}while(halfEdge!=o);e.push(s)}return e},n.prototype.buildEdgeMap=function(){for(var e=this.cells,t=this.edges,r=this.edgeMap,n=e.length,a=0;a<n;a++)for(var s=e[a],i=s.length,u=0;u<i;u++){var l=s[u],f=s[(u+1)%i],c=l+"-"+f,h=f+"-"+l;if(void 0===r[c]&&void 0===r[h]){var d=new o;d.setIndex(t.length),t.push(d),r[c]=d,r[h]=d}}},n.prototype.process=function(){for(var e=this.edgeMap,t=(this.edges,this.cells),r=this.vertices,n=this.faces,a=this.halfEdges,o=t.length,i=0;i<o;i++){for(var u=t[i],l=n[i],f=t[i].length,c=void 0,h=void 0,d=0;d<f;d++){var p=u[d],g=u[(d+1)%f],v=e[p+"-"+g],m=r[p],x=new s;x.setVertex(m),x.setFace(l),x.setEdge(v),v.getHalfEdge()?(x.setFlipHalfEdge(v.getHalfEdge()),v.getHalfEdge().setFlipHalfEdge(x)):v.setHalfEdge(x),void 0!==c&&c.setNextHalfEdge(x),c=x,0===d&&(h=x),a.push(x),m.setHalfEdge(x)}l.setHalfEdge(h),c.setNextHalfEdge(h)}},t.exports=n},{"./Edge":49,"./Face":50,"./HalfEdge":51,"./Vertex":53,"gl-matrix":85}],53:[function(e,t,r){function n(){this.halfEdge=void 0,this.index=-1}e("gl-matrix").vec3;n.prototype.setIndex=function(e){this.index=e},n.prototype.getIndex=function(){return this.index},n.prototype.setHalfEdge=function(e){this.halfEdge=e},n.prototype.getHalfEdge=function(){return this.halfEdge},t.exports=n},{"gl-matrix":85}],54:[function(e,t,r){var n=e("./../Core/Mesh");t.exports=function(e){if(e.length<0||e[0].length<2)throw"profile must be a non-zero array of atleast 3 2D positions [ [ x0, y0 ], [ x1, y1 ], [ x2, y2 ] ]";for(var t=new n,r=[],a=[],o=[],s=e.length,i=0;i<s;i++)r.push([e[i][0],e[i][1],0]),a.push(i),o.push(s-1-i);var u=[a,o];return t=new n,t.setPositions(r),t.setCells(u),t.process(),t}},{"./../Core/Mesh":52}],55:[function(e,t,r){t.exports=function(e){var t=!0;return-1===e.getIndex()&&(console.log("edge: ",e.getIndex()," does not have a proper index"),t=!1),void 0===e.getHalfEdge()&&(console.log("edge: ",e.getIndex()," does not have a half edge"),t=!1),t}},{}],56:[function(e,t,r){t.exports=function(e){var t=!0;return-1===e.getIndex()&&(console.log("face: ",e.getIndex()," does not have a proper index"),t=!1),void 0===e.getHalfEdge()&&(console.log("face: ",e.getIndex()," does not have a half edge"),t=!1),t}},{}],57:[function(e,t,r){e("./../Queries/HalfEdgePrev");t.exports=function(e){var t=!0,r=e;return void 0===r.getNextHalfEdge()&&(console.log("halfEdge: does not have a next half edge"),t=!1),void 0===r.getFlipHalfEdge()&&(console.log("halfEdge: does not have a flip half edge"),t=!1),void 0===r.getVertex()&&(console.log("halfEdge: does not have a valid vertex"),t=!1),void 0===r.getEdge()&&(console.log("halfEdge: does not have an edge"),t=!1),void 0===r.getFace()&&(console.log("halfEdge: does not have a face"),t=!1),t}},{"./../Queries/HalfEdgePrev":80}],58:[function(e,t,r){var n=e("./FaceIntegrity"),a=e("./EdgeIntegrity"),o=e("./VertexIntegrity"),s=e("./HalfEdgeIntegrity"),i={};i.checkMesh=function(e){var t=!0;return this.checkFaces(e.getFaces())||(console.log("faces are messed up"),t=!1),this.checkEdges(e.getEdges())||(console.log("edges are messed up"),t=!1),this.checkVertices(e.getVertices())||(console.log("vertices are messed up"),t=!1),this.checkHalfEdges(e.getHalfEdges())||(console.log("half edges are messed up"),t=!1),console.log("mesh is valid!"),t},i.checkEdges=function(e){for(var t=!0,r=e.length,n=0;n<r;n++){var o=e[n];t=a(o)}return t},i.checkFaces=function(e){for(var t=!0,r=e.length,a=0;a<r;a++){var o=e[a];t=n(o)}return t},i.checkVertices=function(e){for(var t=!0,r=e.length,n=0;n<r;n++){var a=e[n];t=o(a)}return t},i.checkHalfEdges=function(e){for(var t=!0,r=e.length,n=0;n<r;n++){var a=e[n];t=s(a)}return t},t.exports=i},{"./EdgeIntegrity":55,"./FaceIntegrity":56,"./HalfEdgeIntegrity":57,"./VertexIntegrity":60}],59:[function(e,t,r){var n=e("./Integrity");t.exports=function(e){var t=!0;return console.log("checking faces"),n.checkFaces(e.getFaces())||(console.log("faces are messed up"),t=!1),console.log("checking edges"),n.checkEdges(e.getEdges())||(console.log("edges are messed up"),t=!1),console.log("checking vertices"),n.checkVertices(e.getVertices())||(console.log("vertices are messed up"),t=!1),console.log("checking halfedges"),n.checkHalfEdges(e.getHalfEdges())||(console.log("half edges are messed up"),t=!1),console.log("mesh is valid!"),t}},{"./Integrity":58}],60:[function(e,t,r){t.exports=function(e){var t=!0;return-1===e.getIndex()&&(console.log("vertex : ",e.getIndex()," does not have a proper index"),t=!1),void 0===e.getHalfEdge()&&(console.log("vertex : ",e.getIndex()," does not have a half edge"),t=!1),t}},{}],61:[function(e,t,r){var n=e("./../Queries/VertexNeighbors"),a=e("./../Queries/FaceVertices"),o=(e("./../Queries/FaceHalfEdges"),e("./../Queries/VertexHalfEdges")),s=e("./InsertVertex"),i=e("./InsertEdge"),u=e("gl-matrix").vec3;t.exports=function(e){for(var t=[],r=e.positions,l=r.length,f=0;f<l;f++)t.push(u.clone(r[f]));for(var c=(u.create(),u.create()),h=e.getVertices(),d=h.length,p={},f=0;f<32;f++){var g=3/(2*f),v=1/(4*f);p[f]=[1-g-v,g/f,v/f]}for(var f=0;f<d;f++){var m=h[f],x=m.getIndex(),M=r[x],y=o(m),b=y.length,E=p[b];u.copy(c,M),u.scale(c,c,E[0]);for(var w=0;w<b;w++){var I=y[w],S=I.getNextHalfEdge(),F=r[S.getVertex().getIndex()];u.scaleAndAdd(c,c,F,E[1]);var D=S.getNextHalfEdge(),_=r[D.getVertex().getIndex()];u.scaleAndAdd(c,c,_,E[2])}u.copy(t[x],c)}for(var A={},j=e.getFaces(),C=j.length,f=0;f<C;f++){var H=j[f],N=a(H),d=N.length,O=u.create();A[H.getIndex()]=O;for(var w=0;w<d;w++){var m=N[w],x=m.getIndex(),M=r[x];u.scaleAndAdd(O,O,M,.25)}}for(var R={},L=e.getEdges(),T=L.length,f=0;f<T;f++){var z=L[f],k=u.create();R[z.getIndex()]=k;var I=z.getHalfEdge(),q=I.getVertex(),P=r[q.getIndex()];u.scaleAndAdd(k,k,P,.375);var V=r[I.getNextHalfEdge().getNextHalfEdge().getVertex().getIndex()],B=r[I.getNextHalfEdge().getNextHalfEdge().getNextHalfEdge().getVertex().getIndex()];u.scaleAndAdd(k,k,V,1/16),u.scaleAndAdd(k,k,B,1/16);var U=I.getFlipHalfEdge(),Q=U.getVertex(),Y=r[Q.getIndex()];u.scaleAndAdd(k,k,Y,.375);var W=r[U.getNextHalfEdge().getNextHalfEdge().getVertex().getIndex()],X=r[U.getNextHalfEdge().getNextHalfEdge().getNextHalfEdge().getVertex().getIndex()];u.scaleAndAdd(k,k,W,1/16),u.scaleAndAdd(k,k,X,1/16)}for(var f=0;f<T;f++){var z=L[f],G=z.getIndex();s(e,z.getIndex(),R[G])}for(var K={},f=0;f<C;f++){var H=j[f];K[H.getIndex()]=[];for(var h=a(H),d=h.length,w=0;w<d;w++){var m=h[w],y=n(m);2==y.length&&K[H.getIndex()].push(m)}}for(var $=Object.keys(K),f=0;f<$.length;f++){var Z=$[f],h=K[Z],J=h[0],ee=h[1],te=h[2],re=h[3],ne=i(e,J.getIndex(),te.getIndex()),ae=s(e,ne.edge.getIndex(),A[Z]);K[Z].push(ae),i(e,ee.getIndex(),ae.getIndex()),i(e,re.getIndex(),ae.getIndex())}for(var f=0;f<l;f++)u.copy(r[f],t[f])}},{"./../Queries/FaceHalfEdges":78,"./../Queries/FaceVertices":79,"./../Queries/VertexHalfEdges":83,"./../Queries/VertexNeighbors":84,"./InsertEdge":67,"./InsertVertex":68,"gl-matrix":85}],62:[function(e,t,r){var n=(e("./../Core/Mesh"),e("./../Core/Vertex")),a=e("./../Core/Edge"),o=e("./../Core/HalfEdge"),s=e("./../Core/Face"),i=(e("./../Queries/FaceHalfEdges"),e("gl-matrix").vec3);t.exports=function(e,t){for(var r=e.positions,u=(r.length,e.getVertices()),l=u.length,f=e.getFaces(),c=(f.length,e.getEdges()),h=(c.length,e.getEdgeMap()),d=t.positions,p=d.length,g=t.getVertices(),v=(g.length,t.getCells()),m=v.length,x=0;x<p;x++){var M=new n;M.setIndex(u.length),u.push(M);var y=i.clone(d[x]);r.push(y)}for(var x=0;x<m;x++){var b=v[x],E=b.length,w=new s;w.setIndex(f.length),f.push(w);for(var I=void 0,S=[],F=0;F<E;F++){var D=l+b[F],_=l+b[(F+1)%E],A=u[D],j=e.getEdge(D,_),C=!!j,H=new o;if(C){var N=j.getHalfEdge();N.setFlipHalfEdge(H),H.setFlipHalfEdge(N)}else{j=new a,j.setIndex(c.length),j.setHalfEdge(H),c.push(j);var O=e.getEdgeKeys(D,_);h[O[0]]=j,h[O[1]]=j}H.setFace(w),H.setEdge(j),H.setVertex(A),I&&I.setNextHalfEdge(H),S.push(H),I=H,A.setHalfEdge(H)}w.setHalfEdge(I),I.setNextHalfEdge(S[0])}}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Core/Mesh":52,"./../Core/Vertex":53,"./../Queries/FaceHalfEdges":78,"gl-matrix":85}],63:[function(e,t,r){var n=e("./../Core/Edge"),a=e("./../Core/HalfEdge"),o=e("./../Core/Face");t.exports=function(e,t,r){var s=e.getEdgeMap(),i=e.getFaces(),u=e.getHalfEdges(),l=e.getEdges();r||(r=new o,r.setIndex(i.length));for(var f,c=t.length,h=[],d=0;d<c;d++){var p=t[d],g=t[(d+1)%c],v=p.getIndex(),m=g.getIndex(),x=new a,M=e.getEdge(v,m);if(M){var y=M.getHalfEdge();y.getVertex()==p?x=y:(x.setFlipHalfEdge(y),y.setFlipHalfEdge(x))}else{M=new n;var b=e.getEdgeKeys(v,m);M.setIndex(l.length),l.push(M),M.setHalfEdge(x),s[b[0]]=M,s[b[1]]=M}x.setEdge(M),x.setFace(r),x.setVertex(p),f&&f.setNextHalfEdge(x),p.setHalfEdge(x),h.push(x),f=x,u.push(x)}return r.setHalfEdge(h[0]),f.setNextHalfEdge(h[0]),r}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51}],64:[function(e,t,r){var n=(e("./../Core/Face"),e("./../Core/Edge"),e("./../Core/HalfEdge"),e("./../Queries/HalfEdgePrev"));t.exports=function(e,t){var r=e.getEdges(),a=r[t],o=a.getHalfEdge(),s=n(o),i=o.getNextHalfEdge(),u=o.getVertex(),l=o.getFace(),f=o.getFlipHalfEdge(),c=n(f),h=f.getNextHalfEdge(),d=f.getVertex(),p=f.getFace();l.setHalfEdge(i),s.setNextHalfEdge(h),u.setHalfEdge(h),c.setNextHalfEdge(i),d.setHalfEdge(i);var g=e.getFaces();g.splice(p.getIndex(),1);for(var v=g.length,m=0;m<v;m++)g[m].setIndex(m);r.splice(t,1);for(var x=r.length,m=0;m<x;m++)r[m].setIndex(m);var M=e.getEdgeKeys(u.getIndex(),d.getIndex()),y=e.getEdgeMap();delete y[M[0]],delete y[M[1]]}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Queries/HalfEdgePrev":80}],65:[function(e,t,r){var n=e("./../Core/Mesh"),a=e("gl-matrix").vec3;t.exports=function(e){for(var t=new n,r=[],o=e.getPositions(),s=o.length,i=0;i<s;i++)r.push(a.clone(o[i]));return t.setPositions(r),t.setCells(e.getCells()),t.process(),t}},{"./../Core/Mesh":52,"gl-matrix":85}],66:[function(e,t,r){var n=e("./../Core/Vertex"),a=e("./../Core/Edge"),o=e("./../Core/HalfEdge"),s=e("./../Core/Face"),i=e("./../Queries/FaceHalfEdges"),u=(e("./../Queries/MeshCentroid"),e("guf").calculateNormal),l=e("cga").expandPolygon2,f=e("gl-matrix").vec3,c=e("gl-matrix").quat,h=f.fromValues(0,0,1);t.exports=function(e,t,r,d){for(var p=e.getVertices(),g=e.getHalfEdges(),v=e.getEdges(),m=e.getEdgeMap(),x=e.getFaces(),M=e.positions,y=x[t],b=i(y),E=b.length,w=[],I=0;I<E;I++){var S=b[I],F=S.getVertex(),D=F.getIndex();w.push(F)}var _=w.length,A=M[w[0].getIndex()],j=M[w[1].getIndex()],C=M[w[2].getIndex()],H=u(A,j,C),N=c.create();c.rotationTo(N,H,h);for(var O=[],R=[],L=[],T=0,z=0;z<_;z++){var F=w[z],D=F.getIndex(),k=f.clone(M[D]);f.transformQuat(k,k,N),T=k[2],R.push([k[0],k[1]]),L.push(D),O.push(new n)}c.rotationTo(N,h,H);var q=l(R,-(d||1e-5)),P=q.length,V=[],B=[],U=[];T+=void 0!=r?r:0;for(var I=0;I<P;I++){var Q=q[I],Y=f.fromValues(Q[0],Q[1],T);f.transformQuat(Y,Y,N),V.push(Y);var F=O[I];F.setIndex(M.length),M.push([Y[0],Y[1],Y[2]]),p.push(F)}for(var W=void 0,X=void 0,I=0;I<P;I++){var G=y,K=O[I],$=O[(I+1)%P],Z=new a,S=new o,J=new o;S.setFlipHalfEdge(J),S.setEdge(Z),S.setVertex(K),S.setFace(G),g.push(S),J.setFlipHalfEdge(S),J.setEdge(Z),J.setVertex($),g.push(J),Z.setIndex(v.length),Z.setHalfEdge(S),v.push(Z);var ee=e.getEdgeKeys(K.getIndex(),$.getIndex());m[ee[0]]=Z,m[ee[1]]=Z,K.setHalfEdge(S),B.push(Z),U.push(S),W&&(W.setNextHalfEdge(S),J.setNextHalfEdge(X)),W=S,X=J}var S=U[0],J=S.getFlipHalfEdge();W.setNextHalfEdge(S),J.setNextHalfEdge(X),y.setHalfEdge(S);for(var te=[],re=[],ne=void 0,W=void 0,I=0;I<P;I++){var K=O[I],ae=w[I],oe=K.getHalfEdge(),se=oe.getFlipHalfEdge(),ie=b[I],ue=I-1;ue=ue<0?P+ue:ue;var le=b[ue],G=new s,Z=new a,S=new o,J=new o;S.setFlipHalfEdge(J),S.setNextHalfEdge(ie),S.setEdge(Z),S.setVertex(K),S.setFace(G),J.setFlipHalfEdge(S),J.setNextHalfEdge(se.getNextHalfEdge()),J.setEdge(Z),J.setVertex(ae),J.setFace(ne),Z.setIndex(v.length),v.push(Z),Z.setHalfEdge(S),G.setIndex(x.length),G.setHalfEdge(S),x.push(G),te.push(G),ae.setHalfEdge(J),se.setNextHalfEdge(S),se.setFace(G),ie.setFace(G),le.setNextHalfEdge(J),re.push(S),ne=G}var S=re[0],J=S.getFlipHalfEdge();return J.setFace(te[te.length-1]),y}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Core/Vertex":53,"./../Queries/FaceHalfEdges":78,"./../Queries/MeshCentroid":81,cga:21,"gl-matrix":85,guf:101}],67:[function(e,t,r){function n(e,t){for(var r={},n=l(e),a=n.length,o=l(t),s=o.length,i=0;i<a;i++)for(var u=n[i].getFace(),f=0;f<s;f++){var c=o[f].getFace();u.getIndex()===c.getIndex()&&(r[u.getIndex()]=c)}return Object.keys(r)}function a(e,t){var r=e;do{e.setFace(t),e=e.getNextHalfEdge()}while(e!=r)}var o=e("./../Core/Face"),s=e("./../Core/Edge"),i=e("./../Core/HalfEdge"),u=e("./../Queries/HalfEdgePrev"),l=e("./../Queries/VertexHalfEdges");t.exports=function(e,t,r){if(t===r)throw"illegal edge inseration: "+t+" , "+r;var l=e.getEdges(),f=e.getHalfEdges(),c=e.getEdgeMap(),h=e.getVertices(),d=e.getFaces();if(!e.getEdge(t,r)){for(var p,g,v,m,x=h[t],M=h[r],y=n(x,M),b=y.length,E=0;E<b;E++){var w=d[y[E]],I=w.getHalfEdge(),S=I;do{var F=S.getVertex().getIndex();F===t&&(p=S),F===r&&(v=S),S=S.getNextHalfEdge()}while(S!=I);if(void 0!=v||void 0!=p)break;v=void 0,p=void 0}if(g=u(v),m=u(p),void 0===p||void 0===g||void 0===v||void 0===m)throw"error finding neighboring half edges when inserting edge";var D=new s;D.setIndex(l.length);var _=e.getEdgeKeys(t,r);c[_[0]]=D,c[_[1]]=D,l.push(D);var A=new o;A.setIndex(d.length),d.push(A);var j=new i,C=new i;return j.setNextHalfEdge(p),j.setFlipHalfEdge(C),j.setVertex(M),j.setEdge(D),j.setFace(w),f.push(j),C.setNextHalfEdge(v),C.setFlipHalfEdge(j),C.setVertex(x),C.setEdge(D),C.setFace(A),f.push(C),D.setHalfEdge(j),w.setHalfEdge(j),A.setHalfEdge(C),m.setNextHalfEdge(C),g.setNextHalfEdge(j),a(C,A),a(j,w),{edge:D,face:A}}}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Queries/HalfEdgePrev":80,"./../Queries/VertexHalfEdges":83}],68:[function(e,t,r){var n=(e("./../Core/Face"),e("./../Core/Edge")),a=e("./../Core/Vertex"),o=e("./../Core/HalfEdge"),s=e("gl-matrix").vec3;t.exports=function(e,t,r){var i=e.getEdges(),u=e.getHalfEdges(),l=e.getEdgeMap(),f=e.getVertices(),c=e.positions,h=i[t],d=h.getHalfEdge(),p=d.getFace(),g=d.getNextHalfEdge(),v=d.getFlipHalfEdge(),m=d.getVertex(),x=m.getIndex(),M=c[x],y=g.getVertex(),b=y.getIndex(),E=c[b],w=new n,I=new a,S=new o,F=new o,D=c.length,_=s.create();void 0!==r?s.copy(_,r):(s.add(_,M,E),s.scale(_,_,.5)),I.setIndex(D),I.setHalfEdge(S),c.push(_),f.push(I),S.setVertex(I),S.setFace(p),S.setNextHalfEdge(g),S.setFlipHalfEdge(v),S.setEdge(w),d.setNextHalfEdge(S),d.setFlipHalfEdge(F);var A=x+"-"+b,j=b+"-"+x;delete l[A],delete l[j];var C=x+"-"+D,H=D+"-"+x;l[C]=h,l[H]=h,w.setIndex(i.length),i.push(w),w.setHalfEdge(S);var N=D+"-"+b,O=b+"-"+D;l[N]=w,l[O]=w;var R=v.getFace(),L=v.getNextHalfEdge();return v.setNextHalfEdge(F),v.setFlipHalfEdge(S),v.setEdge(w),F.setNextHalfEdge(L),F.setFlipHalfEdge(d),F.setVertex(I),F.setEdge(h),F.setFace(R),u.push(F),I}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Core/Vertex":53,"gl-matrix":85}],69:[function(e,t,r){var n=(e("./../Core/Mesh"),e("./../Queries/FaceHalfEdges")),a=e("./../Queries/FaceVertices");e("gl-matrix").vec3;t.exports=function(e){for(var t=e.getFaces(),r=t.length,o=0;o<r;o++)for(var s=n(t[o]),i=a(t[o]),u=s.length,l=0;l<u;l++){var f=l,c=(l+1)%u,h=(i[f],i[c]),d=s[f],p=s[c];p.setNextHalfEdge(d),d.setVertex(h),h.setHalfEdge(d)}}},{"./../Core/Mesh":52,"./../Queries/FaceHalfEdges":78,"./../Queries/FaceVertices":79,"gl-matrix":85}],70:[function(e,t,r){var n=e("gl-matrix").vec3,a=e("./../Queries/FaceVertices"),o=e("./../Queries/VertexNeighbors"),s=e("./InsertVertex"),i=e("./InsertEdge");t.exports=function(e){for(var t=e.positions,r=t.length,u=[],l=0;l<r;l++)u.push(n.create());for(var f,c=e.getVertices(),h=c.length,l=0;l<h;l++){var d=c[l],p=d.getIndex(),g=t[p],v=u[p],m=o(d),x=m.length;3===x?f=3/16:x>3&&(f=(5/8-Math.pow(.375+.25*Math.cos(2*Math.PI/x),2))/x),n.scaleAndAdd(v,v,g,1-x*f);for(var M=0;M<x;M++){var y=t[m[M].getIndex()];n.scaleAndAdd(v,v,y,f)}}for(var b=e.getEdges(),E=b.length,w=[],v=n.create(),l=0;l<E;l++){n.set(v,0,0,0);var I=b[l],S=I.getHalfEdge(),F=S.getFlipHalfEdge(),D=S.getNextHalfEdge().getNextHalfEdge(),_=F.getNextHalfEdge().getNextHalfEdge(),A=S.getVertex(),j=F.getVertex(),C=D.getVertex(),H=_.getVertex(),N=t[A.getIndex()],O=t[j.getIndex()],R=t[C.getIndex()],L=t[H.getIndex()];n.scaleAndAdd(v,v,N,.375),n.scaleAndAdd(v,v,O,.375),n.scaleAndAdd(v,v,R,.125),n.scaleAndAdd(v,v,L,.125),w.push(s(e,I.getIndex(),v))}for(var T=e.getFaces(),z=T.length,l=0;l<z;l++){var k=T[l],c=a(k),h=c.length,q=c[1],P=c[3],V=c[5];i(e,q.getIndex(),P.getIndex()),i(e,P.getIndex(),V.getIndex()),i(e,V.getIndex(),q.getIndex())}for(var l=0;l<r;l++)n.copy(t[l],u[l])}},{"./../Queries/FaceVertices":79,"./../Queries/VertexNeighbors":84,"./InsertEdge":67,"./InsertVertex":68,"gl-matrix":85}],71:[function(e,t,r){var n=(e("./../Core/Mesh"),e("gl-matrix").vec3),a=n.create();t.exports=function(e,t){n.set(a,0,0,0);for(var r=e.positions,o=r.length,s=0;s<o;s++){var i=r[s];n.subtract(i,i,t)}}},{"./../Core/Mesh":52,"gl-matrix":85}],72:[function(e,t,r){var n=(e("./../Core/Vertex"),e("./../Core/Edge"),e("./../Core/HalfEdge"),e("./../Core/Face"),e("./../Queries/FaceHalfEdges")),a=e("./../Queries/FaceVertices"),o=(e("./../Queries/HalfEdgePrev"),e("./CreateFace"));t.exports=function(e,t,r,s){var i=e.getFaces(),u=i[t],l=(n(u),a(u)),f=l.length,c=i[r],h=(n(c),a(c));if(f!=h.length)throw"faces do not have the same number of vertices, can not create pipe";for(var d=[u,c],p=void 0!=s?s:2,g=0;g<f;g++){var v=g-p;v=v>=f?v%f:v,v=v<0?f+v:v;var m=(g+1)%f-p;m=m>=f?m%f:m,m=m<0?f+m:m;var x=(f-g)%f,M=f-(g+1),y=d[g],b=!!y,E=o(e,[l[v],l[m],h[M],h[x]],y);b||i.push(E)}}},{"./../Core/Edge":49,"./../Core/Face":50,"./../Core/HalfEdge":51,"./../Core/Vertex":53,"./../Queries/FaceHalfEdges":78,"./../Queries/FaceVertices":79,"./../Queries/HalfEdgePrev":80,"./CreateFace":63}],73:[function(e,t,r){var n=(e("gl-matrix").vec3,e("./../Queries/VertexNeighbors")),a=e("./../Queries/FaceVertices"),o=e("./InsertVertex"),s=e("./InsertEdge");t.exports=function(e){for(var t=e.getEdges(),r=t.length,i={},u=0;u<r;u++){var l=t[u];o(e,l.getIndex())}for(var f=e.getFaces(),c=f.length,u=0;u<c;u++){var h=f[u];i[h.getIndex()]=[];for(var d=a(h),p=d.length,g=0;g<p;g++){var v=d[g];2==n(v).length&&i[h.getIndex()].push(v)}}for(var m=Object.keys(i),u=0;u<m.length;u++){var x=m[u],d=i[x],M=d[0],y=d[1],b=d[2],E=d[3],w=s(e,M.getIndex(),b.getIndex()),I=o(e,w.edge.getIndex());i[x].push(I),s(e,y.getIndex(),I.getIndex()),s(e,E.getIndex(),I.getIndex())}}},{"./../Queries/FaceVertices":79,"./../Queries/VertexNeighbors":84,"./InsertEdge":67,"./InsertVertex":68,"gl-matrix":85}],74:[function(e,t,r){var n=e("./../Queries/MeshCentroid"),a=e("gl-matrix").vec3,o=a.create();t.exports=function(e,t){t.constructor!=Array&&(t=[t,t,t]),a.set(o,0,0,0);for(var r=n(e),s=e.positions,i=s.length,u=0;u<i;u++){var l=s[u];a.subtract(l,l,r),a.multiply(l,l,t),a.add(l,l,r)}}},{"./../Queries/MeshCentroid":81,"gl-matrix":85}],75:[function(e,t,r){var n=e("./../Queries/FaceVertices"),a=e("guf").calculateNormal,o=e("cga").triangulatePolygon2,s=e("gl-matrix").vec3,i=e("gl-matrix").quat,u=e("./InsertEdge");t.exports=function(e){for(var t=e.positions,r=e.getFaces(),l=r.length,f=s.fromValues(0,0,1),c=0;c<l;c++){var h=r[c],d=n(h),p=d.length;if(3!==p){var g=t[d[0].getIndex()],v=t[d[1].getIndex()],m=t[d[2].getIndex()],x=a(g,v,m),M=i.create();i.rotationTo(M,x,f);for(var y=[],b=[],E=0;E<p;E++){var w=d[E],I=w.getIndex(),S=s.clone(t[I]);s.transformQuat(S,S,M),y.push([S[0],S[1]]),b.push(I)}for(var F=o(y),D=F.length,_=0;_<D;_++){var A=F[_],j=b[A[1]],C=b[A[2]];u(e,j,C)}}}return e}},{"./../Queries/FaceVertices":79,"./InsertEdge":67,cga:21,"gl-matrix":85,guf:101}],76:[function(e,t,r){var n=e("./../Core/Vertex"),a=(e("./../Queries/FaceHalfEdges"),e("./../Queries/FaceVertices")),o=e("./../Queries/VertexHalfEdges"),s=e("./CreateFace"),i=e("guf").cross,u=e("guf").calculateNormal,l=e("cga").expandPolygon2,f=e("gl-matrix").vec3,c=e("gl-matrix").quat,h=f.create(),d=f.create(),p=(f.create(),f.create(),f.fromValues(0,0,1));t.exports=function(e,t,r){var g=e.positions,v=e.getVertices(),m=v.length,x=e.getFaces(),M=x.length;t=void 0!=t?t:1,
r=void 0!=r?r:t;for(var y=0;y<m;y++){var b=v[y],E=g[b.getIndex()],w=o(b),I=w.length;f.set(h,0,0,0);for(var S=0;S<I;S++){var F=w[S],D=w[(S+1)%I],_=F.getNextHalfEdge(),A=D.getNextHalfEdge(),j=_.getVertex(),C=A.getVertex(),H=g[j.getIndex()],N=g[C.getIndex()];i(d,H,E,N),f.add(h,h,d)}f.normalize(h,h),f.scale(h,h,r);var O=f.create();f.add(O,E,h);var b=new n;b.setIndex(v.length),v.push(b),g.push(O)}for(var R=0;R<M;R++){var L=x[R],T=a(L),z=T.length,j=g[T[0].getIndex()],C=g[T[1].getIndex()],k=g[T[2].getIndex()],q=u(j,C,k),P=c.create();c.rotationTo(P,q,p);for(var V=[],B=[],U=0,S=0;S<z;S++){var b=T[S],Q=b.getIndex(),Y=f.clone(g[Q]);f.transformQuat(Y,Y,P),U=Y[2],B.push([Y[0],Y[1]]),V.push(new n)}c.rotationTo(P,p,q);for(var W=l(B,-t),X=W.length,y=0;y<X;y++){var G=W[y],K=f.fromValues(G[0],G[1],U);f.transformQuat(K,K,P);var b=V[y];b.setIndex(v.length),g.push(K),v.push(b)}for(var $=[L],y=0;y<z;y++){var Z,J=y,ee=(y+1)%z,j=T[J],C=T[ee],te=v[j.getIndex()+m],re=v[C.getIndex()+m],k=V[ee],ne=V[J],ae=$[y],oe=void 0==ae;r>0?(Z=s(e,[j,C,k,ne],ae),x.push(s(e,[te,ne,k,re]))):(Z=s(e,[ne,k,C,j],ae),x.push(s(e,[re,k,ne,te]))),oe&&x.push(Z)}}return e}},{"./../Core/Vertex":53,"./../Queries/FaceHalfEdges":78,"./../Queries/FaceVertices":79,"./../Queries/VertexHalfEdges":83,"./CreateFace":63,cga:21,"gl-matrix":85,guf:101}],77:[function(e,t,r){t.exports=function(e){var t=[],r=e.getHalfEdge();return t.push(r.getVertex()),r=r.getFlipHalfEdge(),t.push(r.getVertex()),t}},{}],78:[function(e,t,r){t.exports=function(e){var t=he=e.getHalfEdge(),r=[];do{r.push(he),he=he.getNextHalfEdge()}while(he!=t);return r}},{}],79:[function(e,t,r){t.exports=function(e){var t=he=e.getHalfEdge(),r=[];do{r.push(he.getVertex()),he=he.getNextHalfEdge()}while(he!=t);return r}},{}],80:[function(e,t,r){t.exports=function(e){for(var t=e;e.getNextHalfEdge()!=t;)e=e.getNextHalfEdge();return e}},{}],81:[function(e,t,r){var n=e("gl-matrix").vec3;t.exports=function(e){for(var t=n.create(),r=e.positions,a=r.length,o=0;o<a;o++)n.add(t,t,r[o]);return n.scale(t,t,1/a),t}},{"gl-matrix":85}],82:[function(e,t,r){t.exports=function(e){var t=originalHalfEdge=he=e.getHalfEdge(),r=[];do{he.getNextHalfEdge()===t?(r.push(he.getFace()),he=he.getFlipHalfEdge(),t=he):he=he.getNextHalfEdge()}while(he!=originalHalfEdge);return r}},{}],83:[function(e,t,r){t.exports=function(e){var t=originalHalfEdge=he=e.getHalfEdge(),r=[];do{he.getNextHalfEdge()===t?(he=he.getFlipHalfEdge(),t=he,r.push(he)):he=he.getNextHalfEdge()}while(he!=originalHalfEdge);return r}},{}],84:[function(e,t,r){t.exports=function(e){var t=originalHalfEdge=he=e.getHalfEdge(),r=[];do{he.getNextHalfEdge()===t?(r.push(he.getVertex()),he=he.getFlipHalfEdge(),t=he):he=he.getNextHalfEdge()}while(he!=originalHalfEdge);return r}},{}],85:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./gl-matrix/common.js":86,"./gl-matrix/mat2.js":87,"./gl-matrix/mat2d.js":88,"./gl-matrix/mat3.js":89,"./gl-matrix/mat4.js":90,"./gl-matrix/quat.js":91,"./gl-matrix/vec2.js":92,"./gl-matrix/vec3.js":93,"./gl-matrix/vec4.js":94,dup:22}],86:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],87:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{"./common.js":86,dup:24}],88:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{"./common.js":86,dup:25}],89:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"./common.js":86,dup:26}],90:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{"./common.js":86,dup:27}],91:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{"./common.js":86,"./mat3.js":89,"./vec3.js":93,"./vec4.js":94,dup:28}],92:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{"./common.js":86,dup:29}],93:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{"./common.js":86,dup:30}],94:[function(e,t,r){arguments[4][31][0].apply(r,arguments)},{"./common.js":86,dup:31}],95:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{"./cross":96,"./normalize":99,dup:41}],96:[function(e,t,r){arguments[4][42][0].apply(r,arguments)},{dup:42}],97:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{"./calculate-normal":95,dup:43,guf:101}],98:[function(e,t,r){arguments[4][44][0].apply(r,arguments)},{dup:44}],99:[function(e,t,r){arguments[4][45][0].apply(r,arguments)},{dup:45}],100:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{"./cross":96,"./normalize":99,"./normalize-array":98,dup:46}],101:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{"./guf/calculate-normal":95,"./guf/cross":96,"./guf/face-normals":97,"./guf/normalize":99,"./guf/normalize-array":98,"./guf/vertex-normals":100,dup:47}],102:[function(e,t,r){(function(t,n){var a=e("url"),o=e("child_process").spawn,s=e("fs");r.XMLHttpRequest=function(){"use strict";var r,i,u=this,l=e("http"),f=e("https"),c={},h=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p={},g={},v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],x=!1,M=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var b=function(e){return h||e&&-1===v.indexOf(e.toLowerCase())},E=function(e){return e&&-1===m.indexOf(e)};this.open=function(e,t,r,n,a){if(this.abort(),M=!1,!E(e))throw new Error("SecurityError: Request method not allowed");c={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:a||null},w(this.OPENED)},this.setDisableHeaderCheck=function(e){h=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!b(e))return void console.warn('Refused to set unsafe header "'+e+'"');if(x)throw new Error("INVALID_STATE_ERR: send flag is true");e=g[e.toLowerCase()]||e,g[e.toLowerCase()]=e,p[e]=p[e]?p[e]+", "+t:t},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&i&&i.headers&&i.headers[e.toLowerCase()]&&!M?i.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||M)return"";var e="";for(var t in i.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+i.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&g[e.toLowerCase()]?p[g[e.toLowerCase()]]:""},this.send=function(e){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(x)throw new Error("INVALID_STATE_ERR: send has already been called");var h,v=!1,m=!1,y=a.parse(c.url);switch(y.protocol){case"https:":v=!0;case"http:":h=y.hostname;break;case"file:":m=!0;break;case void 0:case null:case"":h="localhost";break;default:throw new Error("Protocol not supported.")}if(m){if("GET"!==c.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(c.async)s.readFile(y.pathname,"utf8",function(e,t){e?u.handleError(e):(u.status=200,u.responseText=t,w(u.DONE))});else try{this.responseText=s.readFileSync(y.pathname,"utf8"),this.status=200,w(u.DONE)}catch(e){this.handleError(e)}}else{var b=y.port||(v?443:80),E=y.pathname+(y.search?y.search:"");for(var I in d)g[I.toLowerCase()]||(p[I]=d[I]);if(p.Host=h,v&&443===b||80===b||(p.Host+=":"+y.port),c.user){void 0===c.password&&(c.password="");var S=new n(c.user+":"+c.password);p.Authorization="Basic "+S.toString("base64")}"GET"===c.method||"HEAD"===c.method?e=null:e?(p["Content-Length"]=n.isBuffer(e)?e.length:n.byteLength(e),p["Content-Type"]||(p["Content-Type"]="text/plain;charset=UTF-8")):"POST"===c.method&&(p["Content-Length"]=0);var F={host:h,port:b,path:E,method:c.method,headers:p,agent:!1,withCredentials:u.withCredentials};if(M=!1,c.async){var D=v?f.request:l.request;x=!0,u.dispatchEvent("readystatechange");var _=function e(t){if(i=t,301===i.statusCode||302===i.statusCode||303===i.statusCode||307===i.statusCode){c.url=i.headers.location;var n=a.parse(c.url);h=n.hostname;var o={hostname:n.hostname,port:n.port,path:n.path,method:303===i.statusCode?"GET":c.method,headers:p,withCredentials:u.withCredentials};return r=D(o,e).on("error",A),void r.end()}i.setEncoding("utf8"),w(u.HEADERS_RECEIVED),u.status=i.statusCode,i.on("data",function(e){e&&(u.responseText+=e),x&&w(u.LOADING)}),i.on("end",function(){x&&(w(u.DONE),x=!1)}),i.on("error",function(e){u.handleError(e)})},A=function(e){u.handleError(e)};r=D(F,_).on("error",A),e&&r.write(e),r.end(),u.dispatchEvent("loadstart")}else{var j=".node-xmlhttprequest-content-"+t.pid,C=".node-xmlhttprequest-sync-"+t.pid;s.writeFileSync(C,"","utf8");for(var H="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(v?"s":"")+".request;var options = "+JSON.stringify(F)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+j+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+j+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+j+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});"+(e?"req.write('"+JSON.stringify(e).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",N=o(t.argv[0],["-e",H]);s.existsSync(C););var O=JSON.parse(s.readFileSync(j,"utf8"));N.stdin.end(),s.unlinkSync(j),O.err?u.handleError(O.err):(i=O.data,u.status=O.data.statusCode,u.responseText=O.data.text,w(u.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,M=!0,w(this.DONE),this.dispatchEvent("error")},this.abort=function(){r&&(r.abort(),r=null),p=d,this.status=0,this.responseText="",this.responseXML="",M=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!x||this.readyState===this.DONE||(x=!1,w(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in y||(y[e]=[]),y[e].push(t)},this.removeEventListener=function(e,t){e in y&&(y[e]=y[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof u["on"+e]&&u["on"+e](),e in y)for(var t=0,r=y[e].length;t<r;t++)y[e][t].call(u)};var w=function(e){e!=u.LOADING&&u.readyState===e||(u.readyState=e,(c.async||u.readyState<u.OPENED||u.readyState===u.DONE)&&u.dispatchEvent("readystatechange"),u.readyState!==u.DONE||M||(u.dispatchEvent("load"),u.dispatchEvent("loadend")))}}}).call(this,e("_process"),e("buffer").Buffer)},{_process:113,buffer:106,child_process:104,fs:104,http:132,https:110,url:138}],103:[function(e,t,r){var n=(e("xmlhttprequest").XMLHttpRequest,e("mda")),a=(e("lgp"),n.ExtrudeOperator),o=n.TriangulateOperator,s=n.WireframeOperator,i=n.CatmullClarkOperator;fs=e("fs");var u=u||{};u.triangulate=function(e,t){console.log("triangulate");var r=new n.Mesh;return r.setPositions(e),r.setCells(t),r.process(),o(r),[r.getPositions(),r.getCells()]},u.wireframe=function(e,t,r){console.log("wireframe");var a=new n.Mesh;return a.setPositions(e),a.setCells(t),a.process(),s(a,r,r),[a.getPositions(),a.getCells()]},u.extrude=function(e,t,r,o){console.log("extrude");var s=new n.Mesh;s.setPositions(e),s.setCells(t),s.process();for(var i=results.cells.length,u=0;u<i;u++)a(s,u,r,o);return[s.getPositions(),s.getCells()]},u.subdivide=function(e,t){console.log("subdivide");var r=new n.Mesh;return r.setPositions(e),r.setCells(t),r.process(),i(r),[r.getPositions(),r.getCells()]}},{fs:104,lgp:32,mda:48,xmlhttprequest:102}],104:[function(e,t,r){},{}],105:[function(e,t,r){arguments[4][104][0].apply(r,arguments)},{dup:104}],106:[function(e,t,r){"use strict";function n(e){if(e>G)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return o(e,t,r)}function o(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return e instanceof ArrayBuffer?c(e,t,r):"string"==typeof e?l(e,t):h(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function i(e,t,r){return s(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function u(e){return s(e),n(e<0?0:0|d(e))}function l(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,t),o=n(r),s=o.write(e,t);return s!==r&&(o=o.slice(0,s)),o}function f(e){for(var t=e.length<0?0:0|d(e.length),r=n(t),a=0;a<t;a+=1)r[a]=255&e[a];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.__proto__=a.prototype,n}function h(e){if(a.isBuffer(e)){var t=0|d(e.length),r=n(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(Q(e)||"length"in e)return"number"!=typeof e.length||Y(e.length)?n(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|e}function p(e){return+e!=e&&(e=0),a.alloc(+e)}function g(e,t){if(a.isBuffer(e))return e.length;if(Q(e)||e instanceof ArrayBuffer)return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return D(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return F(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function x(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Y(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:M(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):M(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function M(e,t,r,n,a){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,i=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,i/=2,u/=2,r/=2}var l;if(a){var f=-1;for(l=r;l<i;l++)if(o(e,l)===o(t,-1===f?0:l-f)){if(-1===f&&(f=l),l-f+1===u)return f*s}else-1!==f&&(l-=l-f),f=-1}else for(r+u>i&&(r=i-u),l=r;l>=0;l--){for(var c=!0,h=0;h<u;h++)if(o(e,l+h)!==o(t,h)){c=!1;break}if(c)return l}return-1}function y(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var i=parseInt(t.substr(2*s,2),16);if(Y(i))return s;e[r+s]=i}return s}function b(e,t,r,n){return U(q(t,e.length-r),e,r,n)}function E(e,t,r,n){return U(P(t),e,r,n)}function w(e,t,r,n){return E(e,t,r,n)}function I(e,t,r,n){return U(B(t),e,r,n)}function S(e,t,r,n){return U(V(t,e.length-r),e,r,n)}function F(e,t,r){return 0===t&&r===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,r))}function D(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var o=e[a],s=null,i=o>239?4:o>223?3:o>191?2:1;if(a+i<=r){var u,l,f,c;switch(i){case 1:o<128&&(s=o);break;case 2:u=e[a+1],128==(192&u)&&(c=(31&o)<<6|63&u)>127&&(s=c);break;case 3:u=e[a+1],l=e[a+2],128==(192&u)&&128==(192&l)&&(c=(15&o)<<12|(63&u)<<6|63&l)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:u=e[a+1],l=e[a+2],f=e[a+3],128==(192&u)&&128==(192&l)&&128==(192&f)&&(c=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&f)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),a+=i}return _(n)}function _(e){var t=e.length;if(t<=K)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=K));return r}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=t;o<r;++o)a+=k(e[o]);return a}function H(e,t,r){for(var n=e.slice(t,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+256*n[o+1]);return a}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,o,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,a,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,a){return t=+t,r>>>=0,a||R(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,a){return t=+t,r>>>=0,a||R(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,r,n,52,8),r+8}function z(e){if(e=e.trim().replace($,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function k(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var r,n=e.length,a=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function P(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function V(e,t){for(var r,n,a,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,a=r%256,o.push(a),o.push(n);return o}function B(e){return W.toByteArray(z(e))}function U(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function Q(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function Y(e){return e!==e}var W=e("base64-js"),X=e("ieee754");r.Buffer=a,r.SlowBuffer=p,r.INSPECT_MAX_BYTES=50;var G=2147483647;r.kMaxLength=G,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,r){return o(e,t,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,r){return i(e,t,r)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,o){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,i=r-t,u=Math.min(s,i),l=this.slice(n,o),f=e.slice(t,r),c=0;c<u;++c)if(l[c]!==f[c]){s=l[c],i=f[c];break}return s<i?-1:i<s?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return x(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return x(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=t,a=1,o=this[e+--n];n>0&&(a*=256);)o+=this[e+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),X.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),X.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),X.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),X.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){O(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){O(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);O(this,e,t,r,a-1,-a)}var o=0,s=1,i=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);O(this,e,t,r,a-1,-a)}var o=r-1,s=1,i=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,o=n-r;if(this===e&&r<t&&t<n)for(a=o-1;a>=0;--a)e[a+t]=this[a+r];else if(o<1e3)for(a=0;a<o;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var i=a.isBuffer(e)?e:new a(e,n),u=i.length;for(s=0;s<r-t;++s)this[s+t]=i[s%u]}return this};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":107,ieee754:108}],107:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return 3*e.length/4-n(e)}function o(e){var t,r,a,o,s,i,u=e.length;s=n(e),i=new c(3*u/4-s),a=s>0?u-4:u;var l=0;for(t=0,r=0;t<a;t+=4,r+=3)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],i[l++]=o>>16&255,i[l++]=o>>8&255,i[l++]=255&o;return 2===s?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,i[l++]=255&o):1===s&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,i[l++]=o>>8&255,i[l++]=255&o),i}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function i(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(s(n));return a.join("")}function u(e){for(var t,r=e.length,n=r%3,a="",o=[],s=0,u=r-n;s<u;s+=16383)o.push(i(e,s,s+16383>u?u:s+16383));return 1===n?(t=e[r-1],a+=l[t>>2],a+=l[t<<4&63],a+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],a+=l[t>>10],a+=l[t>>4&63],a+=l[t<<2&63],a+="="),
o.push(a),o.join("")}r.byteLength=a,r.toByteArray=o,r.fromByteArray=u;for(var l=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;d<p;++d)l[d]=h[d],f[h.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],108:[function(e,t,r){r.read=function(e,t,r,n,a){var o,s,i=8*a-n-1,u=(1<<i)-1,l=u>>1,f=-7,c=r?a-1:0,h=r?-1:1,d=e[t+c];for(c+=h,o=d&(1<<-f)-1,d>>=-f,f+=i;f>0;o=256*o+e[t+c],c+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+e[t+c],c+=h,f-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=l}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,a,o){var s,i,u,l=8*o-a-1,f=(1<<l)-1,c=f>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+c>=1?h/u:h*Math.pow(2,1-c),t*u>=2&&(s++,u/=2),s+c>=f?(i=0,s=f):s+c>=1?(i=(t*u-1)*Math.pow(2,a),s+=c):(i=t*Math.pow(2,c-1)*Math.pow(2,a),s=0));a>=8;e[r+d]=255&i,d+=p,i/=256,a-=8);for(s=s<<a|i,l+=a;l>0;e[r+d]=255&s,d+=p,s/=256,l-=8);e[r+d-p]|=128*g}},{}],109:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],i(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(s(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,i;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(i=o;i-- >0;)if(r[i]===t||r[i].listener&&r[i].listener===t){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],a(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],110:[function(e,t,r){function n(e){if("string"==typeof e&&(e=o.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}var a=e("http"),o=e("url"),s=t.exports;for(var i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);s.request=function(e,t){return e=n(e),a.request.call(this,e,t)},s.get=function(e,t){return e=n(e),a.get.call(this,e,t)}},{http:132,url:138}],111:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],112:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||a(e)||!!e._isBuffer)}},{}],113:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function i(){v&&p&&(v=!1,p.length?g=p.concat(g):m=-1,g.length&&u())}function u(){if(!v){var e=o(i);v=!0;for(var t=g.length;t;){for(p=g,g=[];++m<t;)p&&p[m].run();m=-1,t=g.length}p=null,v=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function f(){}var c,h,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"==typeof clearTimeout?clearTimeout:a}catch(e){h=a}}();var p,g=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new l(e,t)),1!==g.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.prependListener=f,d.prependOnceListener=f,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],114:[function(e,t,r){(function(e){!function(n){function a(e){throw new RangeError(N[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(H,"."),n+o(e.split("."),t).join(".")}function i(e){for(var t,r,n=[],a=0,o=e.length;a<o;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<o?(r=e.charCodeAt(a++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--)):n.push(t);return n}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function c(e,t,r){var n=0;for(e=r?R(e/F):e>>1,e+=R(e/t);e>O*I>>1;n+=E)e=R(e/O);return R(n+(O+1)*e/(e+S))}function h(e){var t,r,n,o,s,i,f,h,d,p,g=[],v=e.length,m=0,x=_,M=D;for(r=e.lastIndexOf(A),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<v;){for(s=m,i=1,f=E;o>=v&&a("invalid-input"),h=l(e.charCodeAt(o++)),(h>=E||h>R((b-m)/i))&&a("overflow"),m+=h*i,d=f<=M?w:f>=M+I?I:f-M,!(h<d);f+=E)p=E-d,i>R(b/p)&&a("overflow"),i*=p;t=g.length+1,M=c(m-s,t,0==s),R(m/t)>b-x&&a("overflow"),x+=R(m/t),m%=t,g.splice(m++,0,x)}return u(g)}function d(e){var t,r,n,o,s,u,l,h,d,p,g,v,m,x,M,y=[];for(e=i(e),v=e.length,t=_,r=0,s=D,u=0;u<v;++u)(g=e[u])<128&&y.push(L(g));for(n=o=y.length,o&&y.push(A);n<v;){for(l=b,u=0;u<v;++u)(g=e[u])>=t&&g<l&&(l=g);for(m=n+1,l-t>R((b-r)/m)&&a("overflow"),r+=(l-t)*m,t=l,u=0;u<v;++u)if(g=e[u],g<t&&++r>b&&a("overflow"),g==t){for(h=r,d=E;p=d<=s?w:d>=s+I?I:d-s,!(h<p);d+=E)M=h-p,x=E-p,y.push(L(f(p+M%x,0))),h=R(M/x);y.push(L(f(h,0))),s=c(r,m,n==o),r=0,++n}++r,++t}return y.join("")}function p(e){return s(e,function(e){return j.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return C.test(e)?"xn--"+d(e):e})}var v="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof t&&t&&!t.nodeType&&t,x="object"==typeof e&&e;x.global!==x&&x.window!==x&&x.self!==x||(n=x);var M,y,b=2147483647,E=36,w=1,I=26,S=38,F=700,D=72,_=128,A="-",j=/^xn--/,C=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=E-w,R=Math.floor,L=String.fromCharCode;if(M={version:"1.4.1",ucs2:{decode:i,encode:u},decode:h,encode:d,toASCII:g,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return M});else if(v&&m)if(t.exports==v)m.exports=M;else for(y in M)M.hasOwnProperty(y)&&(v[y]=M[y]);else n.punycode=M}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],115:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;e=e.split(t);var i=1e3;o&&"number"==typeof o.maxKeys&&(i=o.maxKeys);var u=e.length;i>0&&u>i&&(u=i);for(var l=0;l<u;++l){var f,c,h,d,p=e[l].replace(/\+/g,"%20"),g=p.indexOf(r);g>=0?(f=p.substr(0,g),c=p.substr(g+1)):(f=p,c=""),h=decodeURIComponent(f),d=decodeURIComponent(c),n(s,h)?a(s[h])?s[h].push(d):s[h]=[s[h],d]:s[h]=d}return s};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],116:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var i=encodeURIComponent(a(s))+r;return o(e[s])?n(e[s],function(e){return i+encodeURIComponent(a(e))}).join(t):i+encodeURIComponent(a(e[s]))}).join(t):i?encodeURIComponent(a(i))+r+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],117:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":115,"./encode":116}],118:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);l.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||i(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var i=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var l=e("./_stream_readable"),f=e("./_stream_writable");u.inherits(n,l);for(var c=s(f.prototype),h=0;h<c.length;h++){var d=c[h];n.prototype[d]||(n.prototype[d]=f.prototype[d])}},{"./_stream_readable":120,"./_stream_writable":122,"core-util-is":126,inherits:111,"process-nextick-args":128}],119:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);a.call(this,e)}t.exports=n;var a=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,a),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":121,"core-util-is":126,inherits:111}],120:[function(e,t,r){(function(r){"use strict";function n(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?j(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function a(t,r){_=_||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof _&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:a,this.highWaterMark=~~this.highWaterMark,this.buffer=new k,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(z||(z=e("string_decoder/").StringDecoder),this.decoder=new z(t.encoding),this.encoding=t.encoding)}function o(t){if(_=_||e("./_stream_duplex"),!(this instanceof o))return new o(t);this._readableState=new a(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),H.call(this)}function s(e,t,r,n,a){var o=f(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,c(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!a){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&a){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var l;!t.decoder||a||n||(r=t.decoder.write(r),l=!t.objectMode&&0===r.length),a||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,a?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),p(e,t)}else a||(t.reading=!1);return i(t)}function i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function l(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function f(e,t){var r=null;return N.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(T("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?A(d,e):d(e))}function d(e){T("emit readable"),e.emit("readable"),y(e)}function p(e,t){t.readingMore||(t.readingMore=!0,A(g,e,t))}function g(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(T("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,y(e))}}function m(e){T("readable nexttick read 0"),e.read(0)}function x(e,t){t.resumeScheduled||(t.resumeScheduled=!0,A(M,e,t))}function M(e,t){t.reading||(T("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;for(T("flow",t.flowing);t.flowing&&null!==e.read(););}function b(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=E(e,t.buffer,t.decoder),r}function E(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?w(e,t):I(e,t),n}function w(e,t){var r=t.head,n=1,a=r.data;for(e-=a.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?a+=o:a+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,a}function I(e,t){var r=O.allocUnsafe(e),n=t.head,a=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++a}return t.length-=a,r}function S(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,A(F,t,e))}function F(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=o;var _,A=e("process-nextick-args"),j=e("isarray");o.ReadableState=a;var C=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),H=e("./internal/streams/stream"),N=e("buffer").Buffer,O=e("buffer-shims"),R=e("core-util-is");R.inherits=e("inherits");var L=e("util"),T=void 0;T=L&&L.debuglog?L.debuglog("stream"):function(){};var z,k=e("./internal/streams/BufferList");R.inherits(o,H);var q=["error","close","destroy","pause","resume"];o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=O.from(e,t),t=""),s(this,r,e,t,!1)},o.prototype.unshift=function(e){return s(this,this._readableState,e,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return z||(z=e("string_decoder/").StringDecoder),this._readableState.decoder=new z(t),this._readableState.encoding=t,this};var P=8388608;o.prototype.read=function(e){T("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return T("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?S(this):h(this),null;if(0===(e=l(e,t))&&t.ended)return 0===t.length&&S(this),null;var n=t.needReadable;T("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,T("length less than watermark",n)),t.ended||t.reading?(n=!1,T("reading or ended",n)):n&&(T("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=l(r,t)));var a;return a=e>0?b(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&S(this)),null!==a&&this.emit("data",a),a},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function a(e){T("onunpipe"),e===h&&s()}function o(){T("onend"),e.end()}function s(){T("cleanup"),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("drain",m),e.removeListener("error",u),e.removeListener("unpipe",a),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",i),x=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function i(t){T("ondata"),M=!1,!1!==e.write(t)||M||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==D(d.pipes,e))&&!x&&(T("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,M=!0),h.pause())}function u(t){T("onerror",t),c(),e.removeListener("error",u),0===C(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",f),c()}function f(){T("onfinish"),e.removeListener("close",l),c()}function c(){T("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,T("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=p?o:s;d.endEmitted?A(g):h.once("end",g),e.on("unpipe",a);var m=v(h);e.on("drain",m);var x=!1,M=!1;return h.on("data",i),n(e,"error",u),e.once("close",l),e.once("finish",f),e.emit("pipe",h),d.flowing||(T("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)r[a].emit("unpipe",this);return this}var o=D(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=H.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this):A(m,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(T("resume"),e.flowing=!0,x(this,e)),this},o.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(T("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(a){if(T("wrapped data"),t.decoder&&(a=t.decoder.write(a)),(!t.objectMode||null!==a&&void 0!==a)&&(t.objectMode||a&&a.length)){n.push(a)||(r=!0,e.pause())}});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<q.length;o++)e.on(q[o],n.emit.bind(n,q[o]));return n._read=function(t){T("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=b}).call(this,e("_process"))},{"./_stream_duplex":118,"./internal/streams/BufferList":123,"./internal/streams/stream":124,_process:113,buffer:106,"buffer-shims":125,"core-util-is":126,events:109,inherits:111,isarray:127,"process-nextick-args":128,"string_decoder/":129,util:105}],121:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return a(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e,t,r){var n=e._transformState;n.transforming=!1;var a=n.writecb;if(!a)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),a(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);i.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(t)})}function s(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,a=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var i=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":118,"core-util-is":126,inherits:111}],122:[function(e,t,r){(function(r){"use strict";function n(){}function a(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){w=w||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof w&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function s(t){if(w=w||e("./_stream_duplex"),!(C.call(s,this)||this instanceof w))return new s(t);this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),_.call(this)}function i(e,t){var r=new Error("write after end");e.emit("error",r),I(t,r)}function u(e,t,r,n){var a=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),I(n,o),a=!1),a}function l(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=j.from(t,r)),t}function f(e,t,r,n,o,s){r||(n=l(t,n,o),A.isBuffer(n)&&(o="buffer"));var i=t.objectMode?1:n.length;t.length+=i;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest=new a(n,o,s),f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else c(e,t,!1,i,n,o,s);return u}function c(e,t,r,n,a,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function h(e,t,r,n,a){--t.pendingcb,r?I(a,n):a(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if(d(r),t)h(e,r,n,t,a);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?S(g,e,r,o,a):g(e,r,o,a)}}function g(e,t,r,n){r||v(e,t),t.pendingcb--,n(),y(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,a=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)a[s]=r,r=r.next,s+=1;c(e,t,!0,t.length,a,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new E(t)}else{for(;r;){var i=r.chunk,u=r.encoding,l=r.callback;if(c(e,t,!1,t.objectMode?1:i.length,i,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function y(e,t){var r=x(t);return r&&(0===t.pendingcb?(M(e,t),t.finished=!0,e.emit("finish")):M(e,t)),r}function b(e,t,r){t.ending=!0,y(e,t),r&&(t.finished?I(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function E(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var w,I=e("process-nextick-args"),S=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:I;s.WritableState=o;var F=e("core-util-is");F.inherits=e("inherits");var D={deprecate:e("util-deprecate")},_=e("./internal/streams/stream"),A=e("buffer").Buffer,j=e("buffer-shims");F.inherits(s,_),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:D.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var C;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!C.call(this,e)||e&&e._writableState instanceof o}})):C=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,r){var a=this._writableState,o=!1,s=A.isBuffer(e);return"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=n),a.ended?i(this,r):(s||u(this,a,e,r))&&(a.pendingcb++,o=f(this,a,s,e,t,r)),o},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":118,"./internal/streams/stream":124,_process:113,buffer:106,"buffer-shims":125,"core-util-is":126,inherits:111,"process-nextick-args":128,"util-deprecate":130}],123:[function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var a=(e("buffer").Buffer,e("buffer-shims"));t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},
n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t=a.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},{buffer:106,"buffer-shims":125}],124:[function(e,t,r){t.exports=e("events").EventEmitter},{events:109}],125:[function(e,t,r){(function(t){"use strict";var n=e("buffer"),a=n.Buffer,o=n.SlowBuffer,s=n.kMaxLength||2147483647;r.alloc=function(e,t,r){if("function"==typeof a.alloc)return a.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var n=r,o=t;void 0===o&&(n=void 0,o=0);var i=new a(e);if("string"==typeof o)for(var u=new a(o,n),l=u.length,f=-1;++f<e;)i[f]=u[f%l];else i.fill(o);return i},r.allocUnsafe=function(e){if("function"==typeof a.allocUnsafe)return a.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new a(e)},r.from=function(e,r,n){if("function"==typeof a.from&&(!t.Uint8Array||Uint8Array.from!==a.from))return a.from(e,r,n);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new a(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new a(e);void 0===o&&(o=0);var s=n;if(void 0===s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new a(e.slice(o,o+s))}if(a.isBuffer(e)){var i=new a(e.length);return e.copy(i,0,0,e.length),i}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new a(e);if("Buffer"===e.type&&Array.isArray(e.data))return new a(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},r.allocUnsafeSlow=function(e){if("function"==typeof a.allocUnsafeSlow)return a.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:106}],126:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function n(e){return"boolean"==typeof e}function a(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function i(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function f(e){return"[object RegExp]"===v(e)}function c(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===v(e)}function d(e){return"[object Error]"===v(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=a,r.isNullOrUndefined=o,r.isNumber=s,r.isString=i,r.isSymbol=u,r.isUndefined=l,r.isRegExp=f,r.isObject=c,r.isDate=h,r.isError=d,r.isFunction=p,r.isPrimitive=g,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":112}],127:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],128:[function(e,t,r){(function(e){"use strict";function r(t,r,n,a){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,i=arguments.length;switch(i){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,a)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:113}],129:[function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=n(e);if("string"!=typeof t&&(x.isEncoding===y||!y(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=d,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=p,this.end=g,t=3;break;default:return this.write=v,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function i(e,t,r){var n=t.length-1;if(n<r)return 0;var a=s(t[n]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--n<r?0:(a=s(t[n]))>=0?(a>0&&(e.lastNeed=a-2),a):--n<r?0:(a=s(t[n]),a>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0)}function u(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}function l(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var r=i(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function h(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function p(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var x=e("buffer").Buffer,M=e("buffer-shims"),y=x.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=c,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{buffer:106,"buffer-shims":125}],130:[function(e,t,r){(function(e){function r(e,t){function r(){if(!a){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var a=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],131:[function(e,t,r){r=t.exports=e("./lib/_stream_readable.js"),r.Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":118,"./lib/_stream_passthrough.js":119,"./lib/_stream_readable.js":120,"./lib/_stream_transform.js":121,"./lib/_stream_writable.js":122}],132:[function(e,t,r){(function(t){var n=e("./lib/request"),a=e("xtend"),o=e("builtin-status-codes"),s=e("url"),i=r;i.request=function(e,r){e="string"==typeof e?s.parse(e):a(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",i=e.protocol||o,u=e.hostname||e.host,l=e.port,f=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?i+"//"+u:"")+(l?":"+l:"")+f,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var c=new n(e);return r&&c.on("response",r),c},i.get=function(e,t){var r=i.request(e,t);return r.end(),r},i.Agent=function(){},i.Agent.defaultMaxSockets=4,i.STATUS_CODES=o,i.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":134,"builtin-status-codes":136,url:138,xtend:140}],133:[function(e,t,r){(function(e){function t(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function n(e){var r=t();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(e){}return!1}function a(e){return"function"==typeof e}r.fetch=a(e.fetch)&&a(e.ReadableStream),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(e){}var o,s=void 0!==e.ArrayBuffer,i=s&&a(e.ArrayBuffer.prototype.slice);r.arraybuffer=r.fetch||s&&n("arraybuffer"),r.msstream=!r.fetch&&i&&n("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&s&&n("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!t()&&a(t().overrideMimeType),r.vbArray=a(e.VBArray),o=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],134:[function(e,t,r){(function(r,n,a){function o(e,t){return i.fetch&&t?"fetch":i.mozchunkedarraybuffer?"moz-chunked-arraybuffer":i.msstream?"ms-stream":i.arraybuffer&&e?"arraybuffer":i.vbArray&&e?"text:vbarray":"text"}function s(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var i=e("./capability"),u=e("inherits"),l=e("./response"),f=e("readable-stream"),c=e("to-arraybuffer"),h=l.IncomingMessage,d=l.readyStates,p=t.exports=function(e){var t=this;f.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new a(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var r,n=!0;if("disable-fetch"===e.mode||"timeout"in e)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!i.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}t._mode=o(r,n),t.on("finish",function(){t._onFinish()})};u(p,f.Writable),p.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1===g.indexOf(n)&&(r._headers[n]={name:e,value:t})},p.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},p.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,o=e._headers,s=null;"GET"!==t.method&&"HEAD"!==t.method&&(s=i.blobConstructor?new n.Blob(e._body.map(function(e){return c(e)}),{type:(o["content-type"]||{}).value||""}):a.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,r=o[e].value;Array.isArray(r)?r.forEach(function(e){u.push([t,e])}):u.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var l=e._xhr=new n.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(l.timeout=t.timeout,l.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(s)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}}}},p.prototype._onXHRProgress=function(){var e=this;s(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,r){this._body.push(e),r()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},p.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),f.Writable.prototype.end.call(n,e,t,r)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":133,"./response":135,_process:113,buffer:106,inherits:111,"readable-stream":131,"to-arraybuffer":137}],135:[function(e,t,r){(function(t,n,a){var o=e("./capability"),s=e("inherits"),i=e("readable-stream"),u=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=r.IncomingMessage=function(e,r,n){function s(){l.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new a(e.value)),s()}}).catch(function(e){u.emit("error",e)})}var u=this;if(i.Readable.call(u),u._mode=n,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){t.nextTick(function(){u.emit("close")})}),"fetch"===n){u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)});var l=r.body.getReader();s()}else{u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText;if(e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var f=u.rawHeaders["mime-type"];if(f){var c=f.match(/;\s*charset=([^;])(;|$)/);c&&(u._charset=c[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(l,i.Readable),l.prototype._read=function(){},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new a(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new a(o.length),i=0;i<o.length;i++)s[i]=255&o.charCodeAt(i);e.push(s)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new a(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new a(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var l=new n.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new a(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":133,_process:113,buffer:106,inherits:111,"readable-stream":131}],136:[function(e,t,r){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],137:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,a=0;a<r;a++)t[a]=e[a];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:106}],138:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,r){if(e&&l.isObject(e)&&e instanceof n)return e;var a=new n;return a.parse(e,t,r),a}function o(e){return l.isString(e)&&(e=a(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return a(e,!1,!0).resolve(t)}function i(e,t){return e?a(e,!1,!0).resolveObject(t):t}var u=e("punycode"),l=e("./util");r.parse=a,r.resolve=s,r.resolveObject=i,r.format=o,r.Url=n;var f=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),g=["'"].concat(p),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],x={javascript:!0,"javascript:":!0},M={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");n.prototype.parse=function(e,t,r){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),a=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(a);o[0]=o[0].replace(/\\/g,"/"),e=o.join(a);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var i=h.exec(s);if(i)return this.path=s,this.href=s,this.pathname=i[1],i[2]?(this.search=i[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=f.exec(s);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,s=s.substr(c.length)}if(r||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===s.substr(0,2);!p||c&&M[c]||(s=s.substr(2),this.slashes=!0)}if(!M[c]&&(p||c&&!y[c])){for(var E=-1,w=0;w<m.length;w++){var I=s.indexOf(m[w]);-1!==I&&(-1===E||I<E)&&(E=I)}var S,F;F=-1===E?s.lastIndexOf("@"):s.lastIndexOf("@",E),-1!==F&&(S=s.slice(0,F),s=s.slice(F+1),this.auth=decodeURIComponent(S)),E=-1;for(var w=0;w<v.length;w++){var I=s.indexOf(v[w]);-1!==I&&(-1===E||I<E)&&(E=I)}-1===E&&(E=s.length),this.host=s.slice(0,E),s=s.slice(E),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var _=this.hostname.split(/\./),w=0,A=_.length;w<A;w++){var j=_[w];if(j&&!j.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var C="",H=0,N=j.length;H<N;H++)j.charCodeAt(H)>127?C+="x":C+=j[H];if(!C.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var O=_.slice(0,w),R=_.slice(w+1),L=j.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);L&&(O.push(L[1]),R.unshift(L[2])),R.length&&(s="/"+R.join(".")+s),this.hostname=O.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var T=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+T,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!x[d])for(var w=0,A=g.length;w<A;w++){var k=g[w];if(-1!==s.indexOf(k)){var q=encodeURIComponent(k);q===k&&(q=escape(k)),s=s.split(k).join(q)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var V=s.indexOf("?");if(-1!==V?(this.search=s.substr(V),this.query=s.substr(V+1),t&&(this.query=b.parse(this.query)),s=s.slice(0,V)):t&&(this.search="",this.query={}),s&&(this.pathname=s),y[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var T=this.pathname||"",B=this.search||"";this.path=T+B}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+a+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,a=Object.keys(this),o=0;o<a.length;o++){var s=a[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),u=0;u<i.length;u++){var f=i[u];"protocol"!==f&&(r[f]=e[f])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var d=c[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||M[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=x||m||r.host&&e.pathname,E=b,w=r.pathname&&r.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],I=r.protocol&&!y[r.protocol];if(I&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===w[0])),x)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=e.search,r.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(I){r.hostname=r.host=w.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var F=w.slice(-1)[0],D=(r.host||e.host||w.length>1)&&("."===F||".."===F)||""===F,_=0,A=w.length;A>=0;A--)F=w[A],"."===F?w.splice(A,1):".."===F?(w.splice(A,1),_++):_&&(w.splice(A,1),_--);if(!b&&!E)for(;_--;_)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),D&&"/"!==w.join("/").substr(-1)&&w.push("");var j=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(I){r.hostname=r.host=j?"":w.length?w.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return b=b||r.host&&w.length,b&&!j&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":139,punycode:114,querystring:117}],139:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],140:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)a.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var a=Object.prototype.hasOwnProperty},{}]},{},[103]);
